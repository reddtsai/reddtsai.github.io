[{"content":"Odds(è³ ç‡) å‡è¨­ç±ƒçƒAéšŠå’ŒBéšŠä»–å€‘çš„å°æˆ°è¨˜éŒ„å¦‚ä¸‹è¡¨ï¼š\n   å°æˆ° A B     1 å‹ è²    2 å‹ è²    3 å‹ è²    4 è²  å‹   5 å‹ è²    6 å‹ è²    7 å‹ è²    8 å‹ è²    9 è²  å‹   10 å‹ è²     ç±ƒçƒæ¯”è³½çš„çµæœåªæœ‰å‹è·Ÿè² (2-way)ï¼Œç•¶ä¸è€ƒæ…®å…¶å®ƒå› ç´ ï¼Œé‚£éº¼å‹ç‡çš„å€’æ•¸å°±æ˜¯å®ƒçš„è³ ç‡ã€‚\n AéšŠ\nè´äº†8å ´ï¼Œå‹ç‡80%ï¼Œè³ ç‡ç‚º ${1 \\over 0.8} = 1.25$ï¼Œå¦‚æœä½ æŠ•æ³¨100ï¼Œç²å‹æ™‚å¯è´å¾—25ã€‚ BéšŠ\nè´äº†2å ´ï¼Œå‹ç‡20%ï¼Œè³ ç‡ç‚º ${1 \\over 0.2} = 5$ï¼Œå¦‚æœä½ æŠ•æ³¨100ï¼Œç²å‹æ™‚å¯è´å¾—400ã€‚  è³ ç‡çš„è§€å¿µå°±ä»‹ç´¹åˆ°é€™ï¼Œæƒ³äº†è§£æ›´å¤šå¯é€²åˆ°å°ç£é‹å½©å®˜ç¶²ï¼Œå¯ä»¥çœ‹åˆ°å„å€‹éšŠä¼çš„æ•¸æ“šï¼Œå¯¦éš›è³ ç‡æœƒç”±é€™äº›æ•¸æ“šä¾†è¨ˆç®—ã€‚\nMargin(åˆ©æ½¤) æ¯”è³½è³ ç‡è¨ˆç®—ï¼Œé™¤äº†éšŠä¼çš„è³‡è¨Šå› ç´ é‚„ä¿å«äº†èŠå®¶çš„åˆ©æ½¤(margin)ï¼Œä»¥å‰›å‰›çš„è³ ç‡ç‚ºä¾‹ï¼Œä¸åŒ…å«åˆ©æ½¤çš„å…¬å¼ï¼š\n$$1 = {{1 \\over A-Odds} + {1 \\over B-Odds}}$$\nå‡è¨­èŠå®¶æƒ³ç²å¾—ç¸½æŠ•æ³¨5%çš„åˆ©æ½¤ï¼Œé‚£éº¼è¨ˆç®—å…¬å¼å°±æœƒè®Šæˆé€™æ¨£ï¼š\n$$1.05 = {{1 \\over A-Odds} + {1 \\over B-Odds}}$$\nReference å°ç£é‹å½©\ncalculator\n","description":"ç±ƒçƒè³ ç‡è¨ˆç®—","id":0,"section":"posts","tags":["Margin"],"title":"èªè­˜é‹å‹•å½©å·è³ ç‡","uri":"https://reddtsai.github.io/zh/posts/bet_margin/"},{"content":"Golang å®˜æ–¹åœ¨ 1.11 ç‰ˆæ¨å‡ºäº† Go modulesï¼Œè®“é–‹ç™¼è€…é€é go mod ä¾†ç®¡ç† project æˆ– package ä¸­æ‰€ä½¿ç”¨çš„å¥—ä»¶ã€‚\nInit å‡è¨­ä»Šå¤©éœ€è¦å»ºç«‹ä¸€å€‹ RESTful å°ˆæ¡ˆï¼Œå…§å®¹å¦‚ä¸‹ï¼š\n1 2 3  mkdir api cd api touch main.go   main.go\n1 2 3 4 5 6 7 8 9 10 11 12 13  package main import \u0026#34;github.com/gin-gonic/gin\u0026#34; func main(){ r := gin.Default() r.GET(\u0026#34;/ping\u0026#34;, func(c *gin.Context) { c.JSON(200, gin.H{ \u0026#34;message\u0026#34;: \u0026#34;pong\u0026#34;, }) }) r.Run() }   å¯ä»¥çœ‹åˆ°é€™è£¡æœ‰ä½¿ç”¨ Gin é€™å€‹å¥—ä»¶ï¼Œæ¥ä¸‹ä¾†é€é go mod ä¾†æ·»åŠ é€™å€‹å¥—ä»¶ï¼Œé¦–å…ˆéœ€åˆå§‹ go modulesï¼š\n1  go mod init api   å®Œæˆå¾Œæœƒç”¢ç”Ÿä¸€å€‹ modules è¨­å®šæª” go.modï¼Œæ¥ä¸‹ä¾†ç•¶ä½ åŸ·è¡Œ buildã€runã€test ç­‰å‘½ä»¤ï¼Œmodules æœƒè‡ªå‹•å¹«ä½ åŠ å…¥ç›¸ä¾å¥—ä»¶ï¼Œç•¶ç„¶ä½ é‚„æ˜¯å¯ä»¥é€é get ä¾†å–å¾—å¥—ä»¶ï¼Œä¸‹æ–¹æ˜¯é€™æ¬¡ go.mod çš„å…§å®¹ï¼š\n1 2 3 4 5  module api go 1.14 require github.com/gin-gonic/gin v1.6.3 // indirect   Golang æä¾›ä¸€å€‹ç’°å¢ƒè®Šæ•¸ GO111MODULE ä¾†æ§åˆ¶æ˜¯å¦å•Ÿç”¨ go modules Get å¯ä½¿ç”¨ä»¥ä¸‹æ–¹æ³•ä¾†å–å¾—æˆ–æ›´æ–°ç›¸ä¾å¥—ä»¶ï¼š\n1 2  # é€é go.mod ä¾†å–å¾—æˆ–æ›´æ–°ç›¸ä¾å¥—ä»¶ go mod download   1 2  # ä½¿ç”¨æŒ‡ä»¤ä¾†å–å¾—æˆ–æ›´æ–°ç›¸ä¾å¥—ä»¶ go get [-u]   å¦‚æœæœ‰ä½¿ç”¨åˆ°ç§æœ‰å¥—ä»¶ï¼Œéœ€è¦åœ¨ go ç’°å¢ƒè®Šæ•¸ GOPRIVATE åŠ å…¥ä½ çš„ç§æœ‰å¥—ä»¶ç¶²åŸŸåï¼Œå¦å¤–ï¼Œä½ æœƒéœ€è¦é€éç™»å…¥æˆ–SSHä¾†å–å¾—ç§æœ‰å¥—ä»¶çš„æ¬Šé™ã€‚ä¾‹è¨­ä¸€å€‹ private gitlab å¥—ä»¶ï¼Œgitlab.com/name/repoï¼Œè¨­å®šå¦‚ä¸‹ï¼š\n1  go env -w GOPRIVATE=gitlab.com/name   List åˆ—å‡ºç›®å‰ä½¿ç”¨åˆ°çš„ç›¸ä¾å¥—ä»¶ï¼š\n1  go list -m all   Clean æ¸…é™¤æœªä½¿ç”¨çš„å¥—ä»¶ï¼ŒåŸ·è¡Œå‰æœ€å¥½å…ˆæ¸…é™¤æš«å­˜ã€‚\ngo clean go mod tidy Reference Go modules\n","description":"using go modules","id":1,"section":"posts","tags":["Go"],"title":"Golang å¥—ä»¶ç®¡ç†ç³»çµ± mod","uri":"https://reddtsai.github.io/zh/posts/go_mod/"},{"content":"èº«ç‚ºä¸€å€‹åŠ å¯†è²¨å¹£äº¤æ˜“æ‰€çš„å¾Œå°å·¥ç¨‹å¸«ï¼Œè¨˜éŒ„ä¸€ä¸‹æˆ‘å¦‚ä½•èˆ‡æ¯”ç‰¹å¹£(Bitcoin)ä¸€èµ·å·¥ä½œã€‚\nBitcoin æ¯”ç‰¹å¹£(Bitcoin)æ˜¯ä¸€ç¨®åŸºæ–¼å»ä¸­å¿ƒåŒ–ï¼Œæ¡ç”¨é»å°é»ç¶²è·¯èˆ‡å…±è­˜ä¸»å‹•æ€§ï¼Œé–‹æ”¾åŸå§‹ç¢¼ï¼Œä»¥å€å¡Šéˆä½œç‚ºåº•å±¤æŠ€è¡“çš„åŠ å¯†è²¨å¹£ï¼Œç›®å‰ç”±ç¤¾ç¾¤å…±åŒç¶­è­·é€™å€‹å”è­°(BIP)ã€‚è€Œæ¯”ç‰¹å¹£ä½•é‹ä½œä¸»è¦ç”±å››å€‹åŠŸèƒ½çµ„åˆè€Œæˆï¼š\n éŒ¢åŒ…(wallet) å€å¡Šéˆ(blockchain) ç¯€é»(node) ç¤¦å·¥(miner)  Exchange åŠ å¯†è²¨å¹£äº¤æ˜“æ‰€æ˜¯ä¸€ç¨®ä¸­å¿ƒåŒ–ï¼Œæä¾›å…Œæ›å’ŒæŠ•è³‡åŠ å¯†è²¨å¹£çš„æœå‹™ï¼ŒæŠŠåŠ å¯†è²¨å¹£è¦–ç‚ºé‡‘èå•†å“ã€‚ä»¥æ¯”ç‰¹å¹£å…Œæ›æœå‹™ä¾†èªªï¼ŒA æƒ³ç”¨ US$9000 è²·ä¸€é¡†æ¯”ç‰¹å¹£ï¼Œç•¶ A æ”¯ä»˜å®Œ US$9000ï¼Œé€éäº¤æ˜“æ‰€éŒ¢åŒ…å»ºç«‹ä¸€å€‹äº¤æ˜“ï¼Œå‚³è‡³ä¸€å€‹æ¯”ç‰¹å¹£ç¯€ï¼Œç„¶å¾Œç­‰åˆ°ç¤¦å·¥ç¢ºèªå®Œé€™å€‹äº¤æ˜“ï¼ŒA çš„æ¯”ç‰¹å¹£éŒ¢æœƒæ”¶åˆ°ä¸€é¡†æ¯”ç‰¹å¹£ã€‚å¾é€™å€‹èªªæ˜å¯çœ‹å‡ºï¼Œäº¤æ˜“æ‰€é€šå¸¸åªéœ€è¦ä½¿ç”¨æ¯”ç‰¹å¹£éŒ¢åŒ…å’Œç¯€é»çš„åŠŸèƒ½ã€‚å¾ŒçºŒæœƒä»‹ç´¹æ€éº¼åœ¨äº¤æ˜“å¯¦ä½œé€™äºŒå€‹åŠŸèƒ½ã€‚\nReference åƒè€ƒä¾†æº\nbitcoin\n","description":"Introduce how to reference bitcoin in the exchange.","id":2,"section":"posts","tags":["Bitcoin","Exchange"],"title":"åŠ å¯†è²¨å¹£äº¤æ˜“æ‰€ï¼šBitcoin Implementation 1","uri":"https://reddtsai.github.io/zh/posts/btc_summary/"},{"content":"ç¬¬ä¸€æ¬¡ç™¼ Golang çš„æ–‡ç« ï¼Œç•¶ç„¶è¦ä¾†å€‹ hello world ä½œç‚ºé–‹å ´ã€‚\nç’°å¢ƒ\nOS ï¼šMac\nGolangï¼š1.14\nEditerï¼šVisual Studio Code Installation å®‰è£ Goã€‚\n1 2 3  brew install go@1.14 go version   Stable versions First Package ç’°å¢ƒæº–å‚™å°±ç·’å¾Œï¼Œä¾†å»ºç«‹ç¬¬ä¸€å€‹ Go Projectã€‚\n1 2 3 4  mkdir hello cd hello touch hello.go code .   example. hello.go\n1 2 3 4 5 6 7  package main import \u0026#34;fmt\u0026#34; func main() { fmt.Println(\u0026#34;hello world\u0026#34;) }   ä¾†çœ‹åˆ° hello.go çš„å…§å®¹ï¼Œä½œå€‹åŸºæœ¬èªè­˜ï¼š\n package  å‘½å(naming)ï¼Œä¸€å€‹ .go æª”ï¼Œé™¤äº† main ä¹‹å¤–ï¼Œç¬¬ä¸€æ­¥æ˜¯æ›¿ package å‘½åï¼Œè«‹å…ˆåƒè€ƒ package names ç­è§£å‘½åè¦å‰‡ï¼Œå¿…å…åœ¨å¼•ç”¨ package æ™‚ç”¢ç”Ÿå›°æ“¾ã€‚ ç©ºé–“(space)ï¼Œç›¸åŒç›®éŒ„ä¸­çš„ .go æª”ï¼Œè—‰ç”± package ä¾†çµ„ç¹”å’Œç·¨è­¯ï¼Œå°±åƒå…¶å®ƒèªè¨€ namespace çš„åŠŸç”¨ã€‚   import  å°å…¥ local æˆ– remote å¥—ä»¶ã€‚   function  åç¨±(name)ï¼Œfunc name() è¼¸å…¥(input)ï¼Œfunc(input) è¼¸å‡º(output)ï¼Œfunc() (output)    åŸ·è¡Œ hello.go é¡¯ç¤º hello world\n1  go run hello.go   Modules æ¥è‘—æ˜¯å¥—ä»¶ç®¡ç†ï¼Œå¾ Go 1.11 é–‹å§‹æœ‰äº† Go Modulesï¼Œé€™è£¡åªè¦å…ˆæœ‰å€‹è§€å¿µï¼Œä¸è«– local æˆ– remote å¥—ä»¶è«‹ä½¿ç”¨ Go Modules ä¾†ç®¡ç†ã€‚\nCLI - go mod Testing ç•¶ Package å®Œæˆå¾Œï¼Œåˆ¥å¿˜äº† go æœ‰å€‹å¾ˆå¥½ç”¨çš„ test frameworkã€‚\nexample. hello_test.go\n1 2 3 4 5 6 7 8 9  package main import ( \u0026#34;testing\u0026#34; ) func TestHello(t *testing.T) { t.Log(\u0026#34;hello world\u0026#34;) }   åŸ·è¡Œæ¸¬è©¦\n1  go test -v   Tour of Go å¦‚æœä½ æ˜¯ç¬¬ä¸€æ¬¡å­¸ç¿’ç¨‹å¼ï¼Œå° Go æ¯«ç„¡æ¦‚å¿µï¼Œå¯å¾ç·šä¸Š Tour é–‹å§‹ã€‚\nTour of Go\nEditer ä»‹ç´¹ä¸€å€‹å…è²»ä¸”åŠŸèƒ½å¼·å¤§çš„ç¨‹å¼ç¢¼ç·¨è¼¯å™¨ Visual Studio Codeï¼Œè®“ä½ ç·¨è¼¯å°ˆæ¡ˆæ›´æœ‰æ•ˆç‡ã€‚\n ä¸‹è¼‰å®‰è£\nè‡³å®˜ç¶²ä¸‹è¼‰æœ€æ–°çš„å®‰è£ç¨‹å¼ï¼ŒåŸ·è¡Œä¸¦å®‰è£ã€‚ å®‰è£ Go æ“´å……å·¥å…·\né–‹å•Ÿ Visual Studio Codeï¼Œç§»è‡³ Extensions é é¢ï¼Œå®‰è£ Goã€‚  Reference GO\n","description":"å»ºç«‹ golang é–‹ç™¼ç’°å¢ƒï¼Œé€²å…¥ç¬¬ä¸€å€‹å°ˆæ¡ˆ","id":3,"section":"posts","tags":["Go"],"title":"åˆæ¬¡è¦‹é¢ Golang","uri":"https://reddtsai.github.io/zh/posts/go_hello/"},{"content":"åœ¨å‰å¾Œç«¯åˆ†é›¢çš„ç’°å¢ƒä¸‹ï¼Œåœ¨å‰ç«¯éœ€è¦å’Œå…¬å¸å¾Œå°æˆ–ç¬¬ä¸‰æ–¹ API æºé€šæ™‚ï¼Œå› ç‚ºè«‹æ±‚ä¾†è‡ªæ–¼ä¸åŒç¶²åŸŸã€é€šè¨Šå”å®šæˆ–é€šè¨ŠåŸ æ™‚ï¼Œè€Œé‡åˆ°è·¨ä¾†æºè³‡æºå…±ç”¨(CORS)çš„å•é¡Œã€‚å¦‚æœæ˜¯åœ¨é–‹ç™¼æ™‚é‡åˆ°é€™å€‹å•é¡Œï¼Œå¯ä»¥åˆ©ç”¨é–‹ç™¼ç’°å¢ƒè«‹æ±‚ä»£ç†ä¾†è§£æ±ºã€‚\nAccess to XMLHttpRequest at \u0026lsquo;https://www.xxx.com/api' from origin \u0026lsquo;http://localhost:8080\u0026rsquo; has been blocked by CORS policy: No \u0026lsquo;Access-Control-Allow-Origin header is present on the requested resource. vue.config.js Vue é€éé…ç½®æ–‡ä»¶(vue.config.js)ä¾†è¨­å®šé–‹ç™¼ç’°å¢ƒè«‹æ±‚ä»£ç†ã€‚\n1 2 3 4 5 6 7  module.exports = { devServer: { proxy: { target: \u0026#39;http://localhost:8080\u0026#39; } } }   é€™æœƒå°‡ä»»ä½•æœªçŸ¥è«‹æ±‚ä»£ç†åˆ° http://localhost:8080ã€‚\nä¹Ÿå¯è¨­å®šå¤šçµ„ä»£ç†æˆ–ä½¿ç”¨ websocketã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14  module.exports = { devServer: { proxy: { \u0026#39;/ws\u0026#39;: { target: \u0026#39;wss://localhost\u0026#39;, ws: true, changeOrigin: true }ï¼Œ \u0026#39;/api\u0026#39;: { target: \u0026#39;http://localhost:8080\u0026#39; } } } }   Reference Vue CLI devserver\n","description":"fix CORS policy issue by devServer","id":4,"section":"posts","tags":["Vue"],"title":"Vue é–‹ç™¼ç’°å¢ƒè«‹æ±‚ä»£ç†","uri":"https://reddtsai.github.io/zh/posts/vue_cors/"},{"content":"å¦‚æœä½ è·Ÿæˆ‘ä¸€æ¨£ç¿’æ…£ç”¨ MVC æˆ–æ˜¯å‰›è¸å…¥å‰ç«¯çš„æ–°æ‰‹ï¼Œéœ€è¦ä¸€å€‹ Front-end frameworksï¼Œè«‹å…ˆåƒè€ƒä¸‹åœ–ã€‚\nå‡è¨­ä½ è·Ÿæˆ‘ä¸€æ¨£é¸æ“‡ Vue.jsï¼Œå¯ä»¥åƒè€ƒä»¥ä¸‹æ­¥é©Ÿä¾†å¹«åŠ©ä½ å»ºç«‹ Vue.js çš„é–‹ç™¼ç’°å¢ƒã€‚\nInstallation ä»¥ä¸‹æ˜¯ç‚º Mac å®‰è£ Vue é–‹ç™¼ç’°å¢ƒçš„æ­¥é©Ÿã€‚\n å®‰è£ Node.js 1  brew install node    å®‰è£ Vue.js 1  npm install vue    å®‰è£ Vue CLI 1  npm install -g @vue/cli     å¦‚æœä½ ä¸æ˜¯è¦å»ºç«‹ Vue å°ˆæ¡ˆï¼Œä½ ä¹Ÿå¯ä»¥ç›´æ¥å°‡ Vue.js åŠ å…¥æ—¢æœ‰ç¶²é ä¸­ä½¿ç”¨\n\u0026lt;script src=\u0026quot;https://cdn.jsdelivr.net/npm/vue/dist/vue.js\u0026quot;\u0026gt;\u0026lt;/script\u0026gt; Creating Vue Project ç’°å¢ƒæº–å‚™å°±ç·’å¾Œï¼Œå°±å¯é€é Vue CLI ä¾†å»ºç«‹ä¸€å€‹ Vue Projectã€‚\n1  vue create hello-vue   æ¥è‘—æœƒè©¢å•å°ˆæ¡ˆè¨­å®šï¼Œä½ å¯é¸ç”¨ä½ æ…£ç”¨çš„åŠŸèƒ½é …ç›®ã€‚\nä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ Vue CLI UI ä»‹é¢ä¾†å»ºç«‹å°ˆæ¡ˆã€‚\n1  vue ui   è©¦è‘—åŸ·è¡Œå‰›å»ºå¥½çš„å°ˆæ¡ˆ hello-vue\n1 2  cd hello-vue npm run serve   å¯ä»¥çœ‹åˆ° Vue æ­¡è¿ç•«é¢(http://localhost:8080/)\nCode Editing ç•¶ç’°å¢ƒå’Œå°ˆæ¡ˆéƒ½æº–å‚™å°±ç·’ï¼Œä»‹ç´¹ä¸€å€‹å…è²»ä¸”åŠŸèƒ½å¼·å¤§çš„ç¨‹å¼ç¢¼ç·¨è¼¯å™¨ Visual Studio Codeï¼Œè®“ä½ ç·¨è¼¯å°ˆæ¡ˆæ›´æœ‰æ•ˆç‡ã€‚\n ä¸‹è¼‰å®‰è£\nè‡³å®˜ç¶²ä¸‹è¼‰æœ€æ–°çš„å®‰è£ç¨‹å¼ï¼ŒåŸ·è¡Œä¸¦å®‰è£ã€‚ å®‰è£ Vue æ“´å……å·¥å…· Vetur\né–‹å•Ÿ Visual Studio Codeï¼Œç§»è‡³ Extensions é é¢ï¼Œå®‰è£ Vetur  Reference Vue.js\n","description":"å»ºç«‹ Vue é–‹ç™¼ç’°å¢ƒ","id":5,"section":"posts","tags":["Vue"],"title":"åˆæ¬¡è¦‹é¢ Vue","uri":"https://reddtsai.github.io/zh/posts/vue_hello/"},{"content":"ä»‹ç´¹ä¸€å€‹è¼•é‡ç´šæ€§èƒ½æ¸¬è©¦å·¥å…· wrk çµ¦å¾Œç«¯é–‹ç™¼è€…ï¼Œå®ƒå¯å”åŠ©ä½ ç­è§£ 1.ç‚ºä»€éº¼æœå‹™æ›äº†?? 2.éœ€ä¸éœ€è¦ Load Balance?? 3.API çš„ QPS å¤šå°‘?? ç­‰ç­‰ \u0026hellip;ï¼Œä¾†çœ‹çœ‹æ€éº¼ä½œã€‚\nç’°å¢ƒ\n Mac Nginx (Debian 9, Google é›²ç«¯å¹³å°) API (.NET Core 3.0, Google é›²ç«¯å¹³å°) SQL Server (Google é›²ç«¯å¹³å°)  Install é¦–å…ˆå®‰è£ wrkï¼Œå› ç‚ºå€‹äººæ˜¯ä½¿ç”¨ Mac å°±é€é Homebrew ä¾†å®‰è£ï¼š\n1  brew install wrk   Test æº–å‚™å¥½è¦æ¸¬è©¦çš„ APIï¼Œä½¿ç”¨ wrk é€²è¡Œå£“æ¸¬ï¼š\nGET http://35.234.53.61/api/lotto649/109000035ï¼Œå®ƒæœƒå›å‚³ä¸€æ®µ Json\n1  wrk -t8 -c500 -d30s --latency http://35.234.53.61/api/lotto649/109000035   -c, \u0026ndash;connectionsï¼šè·Ÿä¼ºæœå™¨å»ºç«‹ä¸¦ä¿æŒçš„TCPé€£æ¥æ•¸é‡\n-d, \u0026ndash;duration ï¼šå£“æ¸¬æ™‚é–“ -t, \u0026ndash;threads ï¼šé–‹å•Ÿå¤šå°‘å€‹ç·šç¨‹é€²è¡Œå£“æ¸¬ -s, \u0026ndash;script ï¼šLuaè…³æœ¬è·¯å¾‘ -H, \u0026ndash;header ï¼šæ·»åŠ  HTTP header\n\u0026ndash;latency ï¼šåˆ—å°å»¶é²çµ±è¨ˆä¿¡æ¯\n\u0026ndash;timeout ï¼štimeout -v, \u0026ndash;version ï¼šwrkçš„è©³ç´°ç‰ˆæœ¬ä¿¡æ¯ æ¸¬è©¦å ±å‘Šï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14  Running 30s test @ http://35.234.53.61/api/lotto649/109000035 8 threads and 500 connections Thread Stats Avg Stdev Max +/- Stdev Latency 708.36ms 223.55ms 1.80s 83.41% Req/Sec 57.29 49.79 346.00 82.95% Latency Distribution 50% 707.45ms 75% 819.04ms 90% 878.19ms 99% 1.70s 10240 requests in 30.06s, 3.12MB read Socket errors: connect 251, read 0, write 0, timeout 0 Requests/sec: 340.64 Transfer/sec: 106.45KB   å ±å‘Šæœ‰å¹¾å€‹é‡é»ï¼š\n å¹³å‡æ¯ç§’è™•ç†(Requests/sec) å¹³å‡æ¯ç§’æµé‡(Transfer/sec) ç™¼ç”ŸéŒ¯èª¤æ•¸(Socket errors)  lua wrk æœ‰æä¾›è‡ªå®šç¾©è…³æœ¬ï¼Œå¯ç”¨ä¾†å®¢è£½æ¸¬è©¦æ–¹æ³•å’Œå ±å‘Šã€‚ä¾‹å¦‚éœ€ä½¿ç”¨ POST æ–¹æ³•æ¸¬è©¦ APIï¼š\npost.lua\n1 2 3  wrk.method = \u0026#34;POST\u0026#34; wrk.body = \u0026#34;{ \u0026#34;id\u0026#34;: 1, \u0026#34;name\u0026#34;: \u0026#34;redd\u0026#34; }\u0026#34; wrk.headers[\u0026#34;Content-Type\u0026#34;] = \u0026#34;application/json\u0026#34;   Reference wrk\n","description":"ä½¿ç”¨ wrk æ¸¬è©¦ API çš„ååé‡","id":6,"section":"posts","tags":["Load"],"title":"API æ€§èƒ½æ¸¬è©¦","uri":"https://reddtsai.github.io/zh/posts/dotnet_wrkloadtest/"},{"content":"ä¸»æµç¨‹å¼èªè¨€å¤§å¤šå¯ä»¥è·¨å¹³å°ä½œæ¥­ï¼Œä½†å° .NET ä¾†èªªæ˜¯å€‹æ–°é®®äº‹ï¼Œé€™æ¬¡å°±ä¾†åˆ†äº«å°‡ API éƒ¨ç½²åˆ° Linuxã€‚\nCreate a VM é¦–å…ˆè«‹æº–å‚™ä¸€å° Linux ä¸»æ©Ÿï¼Œå¯åƒè€ƒå¿«é€Ÿå»ºç«‹ Compute Engineã€‚\né€™æ¬¡ç¯„ä¾‹æ˜¯ä½¿ç”¨ Debian 9 Dependencies and Requirements æ¥è‘—å®‰è£ ASP.NET Core ç’°å¢ƒä¾è³´é—œä¿‚å’Œè¦æ±‚ï¼š\n Install .Net Core 3.1  å®‰è£å‰è«‹å…ˆè¨»å†Š Microsoft é‡‘é‘°å’Œå¥—ä»¶æ‘˜è¦ï¼š 1 2 3 4 5 6 7 8  # è¨»å†Šå¾®è»Ÿé‡‘é‘° wget -O- https://packages.microsoft.com/keys/microsoft.asc | gpg --dearmor \u0026gt; microsoft.asc.gpg sudo mv microsoft.asc.gpg /etc/apt/trusted.gpg.d/ # è¨»å†Šç”¢å“å­˜å„²åº« wget https://packages.microsoft.com/config/debian/9/prod.list sudo mv prod.list /etc/apt/sources.list.d/microsoft-prod.list sudo chown root:root /etc/apt/trusted.gpg.d/microsoft.asc.gpg sudo chown root:root /etc/apt/sources.list.d/microsoft-prod.list    é€éå¥—ä»¶ç®¡ç†(apt-get)å®‰è£ .NET Coreï¼š 1 2 3 4 5 6  # Install apt-get enable SSL sudo apt-get update sudo apt-get install -y apt-transport-https # Install the .NET Core runtime sudo apt-get update sudo apt-get install aspnetcore-runtime-3.1      Install Nginx  å®‰è£åå‘ Proxy ä¼ºæœå™¨ï¼š 1  apt-get install -y nginx    è¨­ç½®ç«™å°ï¼š\nä¿®æ”¹ /etc/nginx/sites-available/default 1 2 3 4 5 6 7 8 9 10 11 12 13 14  server { listen 80; server_name example.com *.example.com; location / { proxy_pass http://localhost:5000; proxy_http_version 1.1; proxy_set_header Upgrade $http_upgrade; proxy_set_header Connection keep-alive; proxy_set_header Host $host; proxy_cache_bypass $http_upgrade; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; proxy_set_header X-Forwarded-Proto $scheme; } }    é‡æ–°è¼‰å…¥è¨­å®šï¼š 1  sudo nginx -s reload      Deploy your api\nè«‹å°‡ä½ çš„ api æ”¾ç½®åˆ°é€™å€‹ä½ç½® /var/www/your_apiã€‚ Monitor your api  æ–°å¢æœå‹™ï¼š\n/etc/systemd/system/sample_api.service 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15  [Unit] Description=.NET Web API running on Debian [Service] WorkingDirectory=/var/www/sample_apiã€‚ ExecStart=/usr/bin/dotnet /var/www/sample_api/sample_api.dll Restart=always # Restart service after 10 seconds if the dotnet service crashes: RestartSec=10 KillSignal=SIGINT SyslogIdentifier=dotnet-api User=www-data Environment=ASPNETCORE_ENVIRONMENT=Production Environment=DOTNET_PRINT_TELEMETRY_MESSAGE=false [Install] WantedBy=multi-user.target    å•Ÿå‹•æœå‹™ï¼š 1 2  sudo systemctl enable kestrel-helloapp.service sudo systemctl start kestrel-helloapp.service       å®Œæˆå¾Œï¼Œä½ å¯ç”±ç€è¦½å™¨æˆ– curl ä½œå€‹æ¸¬è©¦ï¼š\n1 2  curl http://localhost curl http://your ip   Deployment Script å»ºç«‹è‡ªå‹•åŒ–è…³æœ¬ gce-startup.shã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16  # Install Stackdriver logging agent curl -sSO https://dl.google.com/cloudagents/install-logging-agent.sh sudo bash install-logging-agent.sh # Install apt-get enable SSL sudo apt-get -yq install apt-transport-https sudo apt-get -yq install git # Register Microsoft key and feed wget -O- https://packages.microsoft.com/keys/microsoft.asc | gpg --dearmor \u0026gt; microsoft.asc.gpg sudo mv microsoft.asc.gpg /etc/apt/trusted.gpg.d/ wget https://packages.microsoft.com/config/debian/9/prod.list sudo mv prod.list /etc/apt/sources.list.d/microsoft-prod.list ã€‚ã€‚ã€‚   é€™æ¬¡ç¯„ä¾‹æ‰€è£½ä½œçš„è…³æœ¬ï¼Œæ¯æ¬¡éƒ¨ç½²éƒ½æœƒå»ºç«‹å…¨æ–°çš„ VM ä¾†éƒ¨ç½²ç¨‹å¼ï¼Œä½†åœ¨å®¹å™¨çš„éƒ¨ç½²ä¸Šï¼Œæœƒç”± Image æŒçºŒä¾†æ›´æ–° Containerï¼Œæœ‰æ©Ÿæœƒåœ¨å¦å¤–èªªæ˜ã€‚ Load Balance æœ€å¾Œä¾†ä»‹ç´¹ä¸€ä¸‹å¦‚ä½•å»ºç«‹è² è¼‰å¹³è¡¡(Load Balance)ï¼Œå› ç‚ºé€™æ¬¡ Host æ˜¯ä½¿ç”¨ GECï¼Œé€é GEC åŸ·è¡Œå€‹é«”ç¾¤çµ„å’Œå‰›å»ºç«‹çš„è‡ªå‹•åŒ–è…³æœ¬å°±å¯å¿«é€Ÿå®Œæˆï¼Œä¿®æ”¹ä¸€ä¸‹è…³æœ¬ gce.shï¼š\n1 2 3 4 5 6 7 8 9 10 11 12  ã€‚ã€‚ã€‚ gcloud compute instance-groups managed create group-aspnet \\  --base-instance-name aspnet \\  --size 2 \\  --template tmp-aspnet-debian \\  --target-pool pool-aspnet gcloud compute forwarding-rules create lb-aspnet \\  --ports 80 \\  --region asia-east1 \\  --target-pool pool-aspnet   e.g.\nReference Sample Project\n.NET\n","description":"åœ¨ Linux ä¸Šä½¿ç”¨ ASP.NET Core","id":7,"section":"posts","tags":["GCE","dotnet","Debian"],"title":"Linux + Nginx + .NET Core API","uri":"https://reddtsai.github.io/zh/posts/dotnet_hostingce/"},{"content":"éš¨è‘—é›²ç«¯æ™‚ä»£çš„åˆ°ä¾†ï¼Œè®“è»Ÿé«”é–‹ç™¼èˆ‡é›²ç«¯å¹³å°è®Šå¾—å¯†ä¸å¯åˆ†ã€‚é›²ç«¯æœ‰é‚£äº›å¥½è™•ï¼Ÿè©²é¸é‚£å€‹é›²ç«¯ä¾›æ‡‰å•† AWSã€Azureã€GCPã€é˜¿é‡Œäº‘ï¼Ÿï¼Ÿç¶²ä¸Šæœ‰å¾ˆå¤šè«–è¿°å¯ä¾›åƒè€ƒã€‚ç•¶ä½ è¦åŠ å…¥é›²ç«¯æ™‚ï¼Œåƒè¬ä¸è¦ç›´æ¥å°‡å…¬å¸çš„ Server æ¬ä¸Šé›²ç«¯ï¼Œå› ç‚ºå¾ˆæœ‰å¯èƒ½è®“å…¬å¸ç™¼ä¸å‡ºè–ªæ°´ã€‚\nHow é‚£è¦å¦‚ä½•åŠ å…¥é›²ç«¯ï¼Ÿæˆ‘æœƒå»ºè­°ä½ ä»¥ä¸‹ Stepï¼š\n èªè­˜é›²ç«¯ æ¶æ§‹è¦åŠƒ é¸æ“‡ä¾›æ‡‰å•† è©¦ç®—æˆæœ¬ ç”³è«‹é ç®— æ‰“çµ±ç·¨å ±ç¨…  æ¶æ§‹è¦åŠƒçš„éƒ¨åˆ†ï¼Œåªæœ‰é©åˆä½ çš„æ¶æ§‹ï¼Œæ²’æœ‰æ­£ç¢ºç­”æ¡ˆï¼Œå»ºè­°å…ˆç­è§£ä»¥ä¸‹å¹¾å€‹é›²ç«¯ä¸»æµæ¶æ§‹ï¼š\n Serverless\nGCP:App Engine\nAzure:Functions\nAWS:Lambda\nAliCloud:å‡½æ•°è®¡ç®— VM\nGCP:Compute Engine\nAzure:VM\nAWS:EC2\nAliCloud:äº‘æœåŠ¡å™¨ Container\nGCP:Kubernetes Engine\nAzure:Kubernetes Service\nAWS:Elastic Kubernetes Service\nAliCloud:å®¹å™¨æœåŠ¡  ","description":"å¦‚ä½•åŠ å…¥é›²ç«¯ï¼Ÿ","id":8,"section":"posts","tags":["GCP"],"title":"å¿«æ¨‚ä¸Šé›²ç«¯","uri":"https://reddtsai.github.io/zh/posts/gcp/"},{"content":"åˆ†äº«å€‹äººå¦‚ä½•å°‡é›²ç«¯è™›æ“¬æ©Ÿå™¨çµåˆåˆ°é–‹ç™¼å·¥ä½œä¸­ï¼Œä¾‹å¦‚ï¼Œç•¶å°ˆæ¡ˆéœ€è¦äºŒå°ä¸»æ©Ÿï¼Œä¸€å°ç”¨ä¾†ä½œä½¿ç”¨è€…æ¸¬è©¦ï¼Œå¦ä¸€å°çµ¦æœªä¾†ç‡Ÿé‹ä½¿ç”¨ï¼Œä»¥ä¸‹ä»‹ç´¹å€‹äººçš„ä½œæ³•çµ¦å¤§å®¶åƒè€ƒã€‚æœªä¾†ä½œæŒçºŒæ›´æ–°éƒ¨ç½²(CI/CD)æˆ–è‡ªå‹•æ“´å±•(Auto Scaling)ä¹Ÿæœƒä½¿ç”¨é€™å€‹è‡ªå‹•åŒ–è…³æœ¬ã€‚\nCreate a Compute Engine instance é€é CLI çš„æ–¹å¼ä¾†ä»‹ç´¹å¦‚ä½•å»ºç«‹ä¸€å°è™›æ“¬æ©Ÿå™¨ï¼Œé€™æ¬¡ä½¿ç”¨çš„æ˜¯ Google Cloud æä¾›çš„è™›æ“¬æ©Ÿå™¨ Compute Engineã€‚\nè«‹å…ˆæº–å‚™å¥½ä½ çš„ Google å¸³è™Ÿå’Œ SDK  è¨­å®š VM æ‰€åœ¨å€åŸŸ (Zone) 1 2  gcloud config set compute/zone [zone] gcloud config set compute/region [region]   æ±å—äºå¯é¸æ“‡æ–°åŠ å¡ï¼Œæ±åŒ—äºå¯é¸æ“‡é¦–çˆ¾ã€‚\nRegions and Zones  æ–°å¢ä¸€å° VM (Compute Engine) 1  gcloud compute instances create [instance]   æ©Ÿå™¨é¡å‹ï¼šè™›æ“¬åŒ–ç¡¬é«”è¦æ ¼ã€‚ex. \u0026ndash;machine-type=g1-small\nä½œæ¥­ç³»çµ±ï¼šWindows, Linuxã€‚ex. \u0026ndash;image-family=debian-9  è¨­å®šé˜²ç«å¢» (Firewall)\nEnable port 80 for web site 1  gcloud compute firewall-rules create allow-80 --allow tcp:80    å»ºç«‹è² è¼‰å¹³è¡¡ (Load balancing)\nå¦‚æœä½ éœ€è¦å»ºç«‹è² è¼‰å¹³è¡¡ï¼Œä¾ç…§ GCP èªªæ˜ï¼Œè¦ä½¿ç”¨å¢é›†(cluster)ä¾†å»ºç«‹ VM(å–ä»£ç¬¬äºŒæ­¥)ã€‚ 1 2 3 4 5 6 7  gcloud compute instance-templates create [template] gcloud compute target-pools create [pool] gcloud compute instance-groups managed create [group] \\  --base-instance-name [name] \\  --size 2 \\  --template [template] \\  --target-pool [pool]   è² è¼‰å¹³è¡¡ï¼š\n1 2 3  gcloud compute forwarding-rules create [loadbalance] \\  --ports 80 \\  --target-pool [pool]     å®Œæˆå¾Œï¼Œä½ å¯ä»¥è©¦è‘—é€é SSH ç™»å…¥ VMï¼š\n1  gcloud compute ssh [instance]   Create Deployment Script æ¥ä¸‹ä¾†ï¼Œå°‡å»ºç«‹å®¹å™¨çš„å‹•ä½œï¼Œé€é shell script è£½ä½œæˆè…³æœ¬ã€‚å¾ŒçºŒä½ å¯å°‡é€™å€‹è…³æœ¬åŠ å…¥ç‰ˆæœ¬æ§åˆ¶ï¼ŒæŒçºŒæ›´æ–°éƒ¨ç½²ã€‚\nä½¿ç”¨è€…æ¸¬è©¦ç’°å¢ƒï¼ŒCreate_SIT_GCE.shã€‚\n1 2 3 4 5 6 7 8 9  MY_INSTANCE_NAME=\u0026#34;sit-vm\u0026#34; ZONE=asia-east1-a gcloud compute instances create $MY_INSTANCE_NAME \\  --image-family=debian-9 \\  --image-project=debian-cloud \\  --machine-type=g1-small \\  --scopes userinfo-email,cloud-platform \\  --zone $ZONE \\   ç‡Ÿé‹ç’°å¢ƒï¼ŒCreate_PRD_GCE.shã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21  gcloud config set compute/zone asia-east1-a gcloud config set compute/region asia-east1 gcloud compute instance-templates create prd-template \\  --image-family=debian-9 \\  --image-project=debian-cloud \\  --machine-type=g1-small \\  --scopes userinfo-email,cloud-platform gcloud compute target-pools create prd-pool gcloud compute instance-groups managed create prd-group \\  --base-instance-name prd \\  --size 2 \\  --template prd-template \\  --target-pool prd-pool gcloud compute forwarding-rules create lb-prd \\  --ports 80 \\  --target-pool prd-pool   Clean up Compute Engine instance ä¸éœ€è¦æ™‚æ¸…é™¤ VMï¼Œé¿å…è¨ˆè²»å•é¡Œã€‚\n1 2 3 4 5 6  gcloud compute forwarding-rules delete [loadbalance] gcloud compute instance-groups managed delete [group] gcloud compute target-pools delete [pool] gcloud compute instance-templates delete [template] gcloud compute instances delete [instance] gcloud compute firewall-rules delete allow-80   Reference Compute Engine\n","description":"Write a script to create Compute Engine","id":9,"section":"posts","tags":["GCE"],"title":"å¿«é€Ÿå»ºç«‹ Compute Engine","uri":"https://reddtsai.github.io/zh/posts/gcp_computeengine/"},{"content":"è‡³å¾é–‹å§‹ä½¿ç”¨ dotnet core å¾Œï¼Œå€‹äººçš„é–‹ç™¼æ–¹å¼ä¹Ÿå¾ Visual Studio on Windowsï¼Œè½‰æ›ç‚º Visual Studio Code on Macï¼Œè½‰è®Šçš„éç¨‹æœ‰å¾ˆå¤šå€¼å¾—è¨˜éŒ„ã€‚ä¾‹å¦‚æœ€è¿‘é–‹ç™¼ä¸Šéœ€è¦å®‰è£ä¸€å€‹ dotnet å·¥å…·ï¼Œå¦‚æœæ˜¯ç”¨ Visual Studioï¼Œæœƒäº¤ç”±æ“´å……ç®¡ç†å“¡ä¾†å®‰è£å·¥å…·ï¼Œé‚£åœ¨æ²’æœ‰ Visual Studio çš„å”åŠ©ä¸‹å‘¢ï¼Ÿé€™è£¡æœƒä»‹ç´¹å¦‚ä½•ä½¿ç”¨ CLI ä¾†å®‰è£ dotnet-efã€‚\nRequirements é¦–å…ˆæº–å‚™å¥½ç’°å¢ƒï¼Œä»¥æˆ‘ç‚ºä¾‹ï¼š\n macOS 10.15 .NET Core 3.1  ç’°å¢ƒç¢ºèªå¾Œï¼Œé€éä»¥ä¸‹æŒ‡ä»¤ï¼Œåˆ—å‡ºå·²å®‰è£çš„ dotnet toolã€‚\n1 2  dotnet tool list dotnet tool list -g   gï¼šå…¨åŸŸ Install é€é dotnet CLI ä¾†å®‰è£å·¥å…·ï¼Œé€™è£¡ä»‹ç´¹å®‰è£ dotnet-ef å·¥å…·åˆ°å…¨åŸŸæˆ–æœ¬åœ°ã€‚\n Global 1  dotnet tool install dotnet-ef -g    Local\nå®‰è£æœ¬åœ°å·¥å…·ï¼Œéœ€è¦å®šç¾© manifest fileã€‚é¦–å…ˆæº–å‚™å¥½ dotnet projectï¼Œåœ¨å°ˆæ¡ˆä¸‹åŸ·è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œå®ƒæœƒç”¢ç”Ÿä¸€å€‹ dotnet-tools.json è¨˜éŒ„æœ¬åœ°å·¥å…·ã€‚ 1 2  dotnet new tool-manifest dotnet tool install   .config/dotnet-tools.json\n1 2 3 4 5 6 7 8 9 10 11 12  { \u0026#34;version\u0026#34;: 1, \u0026#34;isRoot\u0026#34;: true, \u0026#34;tools\u0026#34;: { \u0026#34;dotnet-ef\u0026#34;: { \u0026#34;version\u0026#34;: \u0026#34;3.1.3\u0026#34;, \u0026#34;commands\u0026#34;: [ \u0026#34;dotnet-ef\u0026#34; ] } } }     Update æ›´æ–° dotnet toolï¼Œä¸€æ¨£åˆ†ç‚ºå…¨åŸŸå’Œæœ¬åœ°ï¼Œå¦‚ä¸‹ç¤ºç¯„ï¼š\n Global 1  dotnet tool update -g dotnet-ef    Local 1  dotnet tool update dotnet-ef     Uninstall å¸è¼‰å·²å®‰è£çš„å·¥å…·ï¼š\n Global 1  dotnet tool uninstall -g dotnet-ef    Local 1  dotnet tool uninstall dotnet-ef     Reference .NET Core tools\n","description":"ä½¿ç”¨ CLI ä¾†å®‰è£ dotnet-ef","id":10,"section":"posts","tags":["dotnet"],"title":"åœ¨ Mac ä¸Šå®‰è£ dotnet tool","uri":"https://reddtsai.github.io/zh/posts/dotnet_tool/"},{"content":"é–‹ç™¼ .NET æ‡‰ç”¨ç¨‹å¼åœ¨è™•ç†è³‡æ–™æ™‚ï¼Œéƒ½æœƒå»ºç«‹æ¨¡å‹é¡åˆ¥(Model)ï¼Œç‰¹åˆ¥åƒæ˜¯ MVC çš„å°ˆæ¡ˆï¼Œè€Œç•¶è³‡æ–™è¦å„²å­˜åˆ°è³‡æ–™åº«æ™‚ï¼Œè³‡æ–™åº«éœ€è¦ç”¢ç”Ÿå°æ˜  Schema ä¾†å„²å­˜ã€‚é€™æ™‚åƒè¬åˆ¥é¦¬ä¸Šé–‹å§‹ï¼Œå…ˆç­è§£å¹¾å€‹å°ˆæœ‰åè© code firstã€model firstã€database firstï¼Œç„¶å¾Œï¼Œå†åˆ©ç”¨è‡ªå‹•ç”Ÿæˆå·¥å…·ä¾†æ¸›å°‘ä½ çš„å·¥ä½œï¼Œå·¥å…·åƒæ˜¯ PMC Tool - Migrationsã€POCO Entity \u0026hellip;ã€‚\nä¸éé€™äº›å·¥å…·ï¼Œå€‹äººè¦ºå¾—åœ¨ mac ä¸Šï¼Œä½¿ç”¨èµ·ä¾†ä¸æ˜¯å¾ˆé †æ‰‹ï¼Œå€‹äººè¼ƒç¿’æ…£ä½¿ç”¨ CLI Tool çš„æ–¹å¼ï¼Œæ¥ä¸‹ä¾†ç”¨å€‹å¯¦ä¾‹èªªæ˜åå‘å·¥ç¨‹ï¼Œå¦‚ä½•ç”¨ MySQL Schema ç”Ÿæˆæ¨¡å‹é¡åˆ¥åˆ°å°ˆæ¡ˆä¸­ã€‚\næˆ‘æ‰€ä½¿ç”¨çš„ç’°å¢ƒï¼š\n Mac Visual Studio Code dotnet core 3.0 dotnet-ef Makefile  Installing è«‹å…ˆå»ºç«‹å¥½ä½ çš„ dotnet projectï¼Œç„¶å¾Œç¢ºèªå·²å®‰è£ï¼š\n CLI Tool\nå®‰è£ dotnet-ef å·¥å…·ï¼Œç”¨ä¾†ä½œæ¨¡å‹ç§»è½‰ã€‚ 1  dotnet tool install --global dotnet-ef    Database Provider\næˆ‘æ‰€ä½¿ç”¨çš„æ˜¯ MySQLï¼Œéœ€å®‰è£ MySql è³‡æ–™åº«æä¾›è€…ã€‚ 1  dotnet add package Pomelo.EntityFrameworkCore.MySql    PROVIDER\n  EntityFrameworkCore.Design\nå¦‚æœä½ æ˜¯ä½¿ç”¨ .NET Core 2.1 ä»¥ä¸Šçš„ç‰ˆæœ¬ï¼Œ.NET Core SDK å·²åŒ…å« Designï¼Œå¯è·³éé€™ä¸€æ­¥ã€‚ 1  dotnet add package Microsoft.EntityFrameworkCore.Design     Scaffold ç•¶è³‡æ–™åº«å’Œå·¥å…·æº–å‚™å®Œæˆï¼Œé€é dbcontext scaffold æŒ‡ä»¤ä¾†é€²è¡Œåå‘å·¥ç¨‹ï¼Œå®ƒæœƒè®€å–è³‡æ–™åº«çš„è³‡è¨Šï¼Œåƒ tables, columns, constraints, and indexes \u0026hellip;ï¼Œç„¶å¾Œç”Ÿæˆ DbContext.cs å’Œ Models.csã€‚\n1  dotnet ef dbcontext scaffold \u0026#34;server=127.0.0.1;port=3306;user=root;password=pwd;database=db\u0026#34; Pomelo.EntityFrameworkCore.MySql   Script æœ€å¾Œï¼Œå»ºç«‹ makefile è…³æœ¬æŒçºŒæ›´æ–°æ¨¡å‹\n1 2 3 4 5 6  efScaffold: dotnet ef dbcontext scaffold \u0026#34;server=127.0.0.1;port=3306;user=root;password=pwd;database=db\u0026#34; \\  Pomelo.EntityFrameworkCore.MySql \\  -o Repositories/Entities \\  --context-dir Repositories -c LotteryContext \\  -p src -f   Reference Side Project\nReverse Engineering\n","description":"åˆ©ç”¨ dotnet-ef å¯¦ä½œ DB åå‘å·¥ç¨‹","id":11,"section":"posts","tags":["EF"],"title":"ç”¨ dotnet ef å·¥å…·ï¼Œå¾ MySQL è‡ªå‹•ç”Ÿæˆ Model.cs","uri":"https://reddtsai.github.io/zh/posts/dotnet_efreverse/"},{"content":"å¾Œç«¯å·¥ç¨‹å¸«çš„å·¥ä½œä¸­å¾ˆå¸¸éœ€è¦ä¸€å€‹å¸¸é§ç¨‹å¼ï¼Œå¹«æˆ‘å€‘è™•ç†éå³æ™‚çš„å·¥ä½œæˆ–ä¾‹è¡Œæ€§çš„æ’ç¨‹å·¥ä½œï¼Œåœ¨ Windows Sever ä¸­æœ‰å¤§å®¶ç†Ÿæ‚‰çš„æœå‹™å’Œå·¥ä½œæ’ç¨‹ï¼Œé‚£ Unix-Like Server å‘¢ï¼Ÿï¼Ÿä½ å¯èƒ½å¸¸å¸¸è½åˆ° Daemon (å®ˆè­·)ï¼Œå¾ˆé›£è·Ÿ Service è¯æƒ³åœ¨ä¸€èµ·ï¼Œåœ¨ Unix-Like ç³»çµ±ä¸­å¸¸æœƒå°‡èƒŒæ™¯ç¨‹å¼ç¨±ä½œ Daemonã€‚æ¥ä¸‹ä¾†é€éå·¥ä½œä¸Šçš„å¯¦ä¾‹ä¾†èªªèªªé€™å€‹ Daemonã€‚é€™å€‹å·¥ä½œéœ€æ±‚æ˜¯è¦åœ¨ Debian ä¸‹å®‰è£ cloud sql proxyï¼Œç„¶å¾Œï¼Œè¦å®ƒåœ¨èƒŒæ™¯åŸ·è¡Œï¼Œé–‹æ©Ÿæ™‚è‡ªå·±å•Ÿå‹•ï¼Œåœ¨é€™è£¡ä½œå€‹è¨˜éŒ„ ã€‚\nSystemd - æœå‹™ç®¡ç†æ©Ÿåˆ¶ é€™æ¬¡å·¥ä½œæ‰€ä½¿ç”¨çš„ç³»çµ±ç‚º Debianï¼Œåœ¨ Debian åŠå…¶å®ƒ Unix-Like ç³»çµ±ä¸­ï¼Œéƒ½æœ‰å€‹æœå‹™ç®¡ç†æ©Ÿåˆ¶ systemdï¼Œé€éé€™å€‹æ©Ÿåˆ¶ä¾†å•Ÿå‹•ã€é—œé–‰èˆ‡è§€å¯Ÿç³»çµ±æœå‹™æˆ–ä½ æ‰€è‡ªå®šçš„æœå‹™ã€‚\nå¯åˆ†ç‚ºå¹¾å€‹é¡å‹å¦‚ä¸‹ï¼š\n .service ä¸€èˆ¬æœå‹™ .socket ç¨‹åºè³‡æ–™äº¤æ› .target åŸ·è¡Œç’°å¢ƒ .mount æª”æ¡ˆç³»çµ±æ›è¼‰ .automount æª”æ¡ˆç³»çµ±æ›è¼‰ .path åµæ¸¬ç‰¹å®šæª”æ¡ˆæˆ–ç›®éŒ„ .timer å¾ªç’°åŸ·è¡Œ   å­˜æ”¾ä½ç½®\n/usr/lib/systemd/system/ï¼šå•Ÿå‹•è…³æœ¬è¨­å®šæª”\n/run/systemd/system/ï¼šåŸ·è¡Œéç¨‹ä¸­æ‰€ç”¢ç”Ÿçš„æœå‹™è…³æœ¬\n/etc/systemd/system/ï¼šç®¡ç†å“¡æ‰€å»ºç«‹çš„åŸ·è¡Œè…³æœ¬\n é‚£è¦æ€éº¼å°‡ cloud sql proxy åŠ å…¥ systemd ä¸­ï¼Ÿï¼Ÿ\næœ¬æ¬¡æœƒä½¿ç”¨ä¸€èˆ¬æœå‹™ cloud_sql_proxy.serviceï¼Œå°‡æª”æ¡ˆæ”¾å…¥å•Ÿå‹•ä½ç½® /etc/systemd/system/ã€‚\nç¯„ä¾‹ /etc/systemd/system/cloud_sql_proxy.service\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17  # æœå‹™è§£é‡‹ã€ç›¸ä¾æ€§ [Unit] Description=Connecting MySQL Client from Compute Engine using the Cloud SQL Proxy Requires=networking.service After=networking.service # æœå‹™åŸ·è¡Œçš„æŒ‡ä»¤åƒæ•¸ [Service] WorkingDirectory=/usr/local/bin ExecStart=/usr/local/bin/cloud_sql_proxy -dir=/var/run/cloud-sql-proxy -instances=redd-side-project:asia-east1:db-mysql-001=tcp:3306 Restart=always StandardOutput=journal User=root # è¦æ›è¼‰å“ªå€‹ target åº•ä¸‹ [Install] WantedBy=multi-user.target   Systemctl - æœå‹™ç®¡ç†æŒ‡ä»¤ åˆæ­¥èªè­˜ systemd å¾Œï¼Œé‚„éœ€èªè­˜ä¸€å€‹ç®¡ç†ç¨‹å¼ systemctlï¼Œä¸»è¦æœƒé€é systemctl çš„æŒ‡ä»¤ä¾†è™•ç†æˆ‘å€‘çš„æœå‹™ã€‚\næ¥ä¸‹ä¾†é€é systemctl ä¾†æ“æ§ cloud_sql_proxy.serviceã€‚\nå•Ÿç”¨/åœç”¨ï¼Œä¸‹æ¬¡é–‹æ©Ÿç”Ÿæ•ˆ\n1 2  sudo systemctl enable cloud-sql-proxy.service sudo systemctl disable cloud-sql-proxy.service   ç«‹åˆ»å•Ÿå‹•/é—œé–‰\n1 2  sudo systemctl start cloud-sql-proxy.service sudo systemctl stop cloud-sql-proxy.service   åˆ—å‡ºç‹€æ…‹\n1  sudo systemctl status cloud-sql-proxy.service   å¸¸ç”¨æŒ‡ä»¤\n1 2 3 4 5 6 7 8 9 10  -- é‡æ–°è¼‰å…¥è¨­å®šæª” sudo systemctl daemon-reload -- åˆ—å‡ºæ‰€æœ‰å•Ÿå‹•çš„ unit sudo systemctl -- åˆ—å‡ºæ‰€æœ‰ .service sudo systemctl list-units --type=service --all -- åˆ—å‡ºæ‰€æœ‰ cpu ç‚ºå .service sudo systemctl list-units --type=service --all | grep cpu -- åˆ—å‡ºç›¸ä¾ sudo systemctl list-dependencies   åˆ°é€™é‚Šå°±å®Œæˆäº†é€™æ¬¡çš„å·¥ä½œä»»å‹™ï¼Œå°‡ cloud_sql_proxy.service åœ¨èƒŒæ™¯åŸ·è¡ŒåŠé–‹æ©Ÿæ™‚è‡ªå·±å•Ÿå‹•ã€‚\nTimer - æ’ç¨‹ ä¸€é–‹å§‹é™¤äº†æœå‹™ï¼Œé‚„æœ‰æåˆ°ä¾‹è¡Œæ€§çš„æ’ç¨‹å·¥ä½œï¼Œé‚£è¦æ€éº¼ä½¿æœå‹™å®šæœŸåŸ·è¡ŒæŸå€‹å·¥ä½œï¼Ÿï¼Ÿç¾å­¸ç¾è³£ï¼Œæ‹¿ systemd.timer ä¾†ä½œå€‹å¯¦ä¾‹(å¤§å¤šæ•¸çš„è³‡è¨Šéƒ½æœƒç”¨ crond ä¾†å®šæœŸè™•ç†æœå‹™ğŸ˜¸ğŸ˜¸)ã€‚\næˆ‘å¸Œæœ›æ¯æ—¥åŸ·è¡Œä¸€æ¬¡æˆ‘çš„ APP\n å•Ÿå‹•ç³»çµ± timer.target app.service ä½ çš„å·¥ä½œ app.timer ä½ çš„æ’ç¨‹(èˆ‡ä½ çš„å·¥ä½œåŒå)\nç¯„ä¾‹ side project\n/etc/systemd/system/app.service  1 2 3 4 5 6 7  [Unit] Description=taiwan lottery scarper [Service] WorkingDirectory=/opt/app/gce/env/bin ExecStart=/opt/app/gce/env/bi/python /opt/app/app.py [Install] WantedBy=multi-user.target   /etc/systemd/system/app.timer\n1 2 3 4 5 6 7 8 9  [Unit] Description=scheduling taiwan lottery scarper [Timer] OnActiveSec=1m OnCalendar=Sun *-*-* 01:00:00 Persistent=true Unit=lotto-scraper.service [Install] WantedBy=multi-user.target   Reference é³¥å“¥\n","description":"å°‡ cloud sql proxy åŠ å…¥ç³»çµ±æœå‹™","id":12,"section":"posts","tags":["Daemon","Debian"],"title":"ç³»çµ±æœå‹™ In Debian","uri":"https://reddtsai.github.io/zh/posts/os_debiandaemon/"},{"content":"ä¸è«–å…¬å¸ project æˆ–å€‹äºº side projectï¼Œéƒ½æœƒé‡åˆ°è³‡æ–™å„²å­˜çš„éœ€æ±‚ï¼Œé€™æ™‚å¯èƒ½å°±æ˜¯\n æ±‚ DBA è‡ªå·±å®‰è£ å‘ Infra ç”³è«‹ é–‹å§‹å­¸ SQL Google  Why Cloud SQl æˆ‘ç‚ºä»€éº¼é¸æ“‡ Cloud SQlï¼ŸåŸå› åªæœ‰ä¸€å€‹ï¼Œå°±æ˜¯å¿«\n å®‰è£å¿« ä¸Šæ‰‹å¿« æ“´å±•å¿« é‹ç¶­å¿«  é€™è£¡æœƒç”¨ GCP æä¾›çš„ Cloud SQl ä¾†èªªæ˜ï¼Œç•¶ç„¶ä¹Ÿå¯ä»¥é¸æ“‡ AWSã€Azureã€é˜¿é‡Œé›²çš„ç”¢å“ã€‚\nInstall MySQL å®‰è£å¿«ï¼Œåªéœ€å¹¾åˆ†é˜å°±èƒ½å»ºç«‹ä¸€å° DBã€‚é–‹å§‹å®‰è£å‰ä½ éœ€è¦å…ˆæœ‰ï¼š\n å•Ÿç”¨ Google Cloud (ä½ éœ€è¦ä¸€çµ„ Google å¸³æˆ¶å’Œä¸€å¼µä¿¡ç”¨å¡) å®‰è£ cloud SDK  1  brew cask install google-cloud-sdk   å®‰è£ DB åªéœ€é–‹å•Ÿçµ‚ç«¯æ©Ÿï¼ŒåŸ·è¡Œä¸‹æ®µå‘½ä»¤ã€‚\n1  gcloud sql instances create [INSTANCE_NAME] --tier=[MACHINE_TYPE] --region=[REGION]      INSTANCE_NAMEï¼šå‘½åä½ çš„ Database instanceã€‚\n  MACHINE_TYPEï¼šDatabase è¦æ ¼ã€‚Price\n  REGIONï¼šInstance å­˜æ”¾ä½ç½®ã€‚Region\nCreating instances èªªæ˜\n   å¦å¤–ï¼Œä½ ä¸ç¿’æ…£å†·å†°å†°çš„å‘½ä»¤ï¼ŒGCP ä¹Ÿæä¾› UI ä»‹é¢è®“ä½ è¨­å®šã€‚\nConnection ä¸Šæ‰‹å¿«ï¼Œä½ å¯å¿«é€Ÿé€£è‡³ cloud databaseï¼Œå®˜æ–¹æä¾›å¤šç¨®æ–¹å¼åŠå„ç¨‹å¼èªè¨€çš„å®Œæ•´ç¯„ä¾‹èªªæ˜ï¼Œæ¸›å°‘ä½ æ‘¸ç´¢çš„æ™‚é–“ã€‚\né€™è£¡ä»‹ç´¹é€é cloud sql proxy å¿«é€Ÿé€£åˆ°å‰›å»ºç«‹çš„ DBã€‚é¦–å…ˆï¼Œå®‰è£ cloud sql proxy\n1 2  gcloud components install cloud_sql_proxy ./cloud_sql_proxy -instances=\u0026lt;INSTANCE_CONNECTION_NAME\u0026gt;=tcp:3306   å¦‚ä¸‹åœ–æ‰€ç¤ºï¼Œä½ å¯ä»¥æ‰¾åˆ° INSTANCE_CONNECTION_NAME\nå†ä¾†ä½¿ç”¨ MySQL workbench ä¾†ä½œå€‹æœ¬æ©Ÿé€£ç·šæ¸¬è©¦ï¼Œå¦‚æœä½ é‚„æ²’å®‰è£ï¼Œè«‹å…ˆé€éä»¥ä¸‹å‘½ä»¤ä¾†å®‰è£ã€‚\n1  brew cask install mysqlworkbench   Replication æ“´å±•å¿«ã€é‹ç¶­å¿«ï¼Œç•¶ä½ åˆæ­¥èªè­˜ SQL å¾Œï¼Œå†é€²éšå°±æ˜¯æ•ˆèƒ½è·Ÿç©å®šï¼Œæœ€é•·è½åˆ°çš„å°±æ˜¯ HA(high availability)ï¼Œè€Œåœ¨ cloud sql ä½ ä¹Ÿåªéœ€è¦ä½œç°¡å–®çš„è¨­å®šä¾†é€¹æˆ HAï¼Œè®“ä½ çš„ DB æ“æœ‰å‚™æ´ã€‚\nå¦ä¸€å€‹ä¾‹å­ï¼Œåœ¨ cloud sql æ–°å¢ä¸€å€‹è®€å–ä½ç½®ï¼Œåˆ†æ•£æµé‡ä¾†æå‡æ•ˆèƒ½ã€‚\nReference æœ¬æ¬¡å¯¦ä½œçš„è²»ç”¨\ncloud sql for mysql\n","description":"Cloud SQl for MySQL on Google Cloud Platform","id":13,"section":"posts","tags":["MySQL"],"title":"åœ¨é›²ä¸Šä½¿ç”¨ MySQL","uri":"https://reddtsai.github.io/zh/posts/gcp_mysql/"},{"content":"èº«ç‚ºä¸€ä½è»Ÿé«”å·¥ç¨‹å¸«æ€éº¼å¯ä»¥æ²’æœ‰ Blogï¼Œå†åŠ ä¸Šå·¥ç¨‹å¸«æœ€æ„›æŒ–æ´çµ¦è‡ªå·±è·³ï¼Œæ‰€ä»¥ä¸€å®šè¦è‡ªå·±æ¶BlogğŸ˜­ğŸ˜­ğŸ˜­ã€‚é€™è£¡è·Ÿå¤§å®¶ä»‹ç´¹å€‹éœæ…‹ç¶²ç«™ç”Ÿæˆå¼•æ“ HUGOï¼Œæ¥è‘—é€é HUGO ä¾†å»ºç«‹ä¸€å€‹ç¾ç¾åˆå…è²»çš„Blogã€‚\nAbout Hugo HUGO æ˜¯ç”± go æ‰€ç·¨å¯«çš„éœæ…‹ç¶²ç«™ç”Ÿæˆå™¨ï¼Œæœ€åˆç”± Steve Francia å‰µç«‹ï¼Œä»¥é–‹æºå°ˆæ¡ˆæ–¹å¼æŒçºŒæ›´æ–°ã€‚Hugo æä¾›å°‡è³‡æ–™æª”æ¡ˆã€i18n åŒ…ã€çµ„æ…‹ã€å¸ƒå±€æ¨¡æ¿ã€éœæ…‹æª”æ¡ˆï¼Œä»¥åŠç”¨ Markdown ç·¨å¯«çš„å…§å®¹ï¼Œç”Ÿæˆä¸€å€‹å®Œæ•´çš„éœæ…‹ç¶²ç«™ã€‚\nCreate a Hugo site ä»¥ä¸‹èªªæ˜ä½ å¯èƒ½éœ€è¦ä¸€é»ç¨‹å¼åŸºæ¥šï¼Œé€™è£¡æœƒä½¿ç”¨ mac os ä¾†ä½œèªªæ˜ã€‚(å€‹äººæ˜¯ä½¿ç”¨è˜‹æœç­†é›»ğŸ˜…ğŸ˜…)\n1.å®‰è£ Hugo ä½¿ç”¨ homebrew å®‰è£ Hugoï¼Œåœ¨çµ‚ç«¯æ©Ÿä¸­è¼¸å…¥\n1  brew install hugo   é©—è¨¼å®‰è£æˆåŠŸï¼Œç¢ºèª hugo ç‰ˆæœ¬ã€‚\n1  hugo version   2.ç”¢ç”Ÿæ–°ç¶²ç«™ é€é new å‘½ä»¤ä¾†ç”¢ç”Ÿä¸€å€‹æ–°ç«™å°ï¼Œåœ¨çµ‚ç«¯æ©Ÿä¸­æ“ä½œ\ncd YourWorkSpace hugo new site myBlog 3.ç¾åŒ–ç¶²ç«™ åŠ å…¥å¤–è§€ä¸»é¡Œåˆ°å‰›å»ºç«‹å¥½çš„ç¶²ç«™ï¼Œåœ¨é€™æŒ‘é¸ä¸€å€‹å¤–è§€ä¸»é¡Œã€‚\næˆ‘ç”¨ Ananke ä¾†ä½œèªªæ˜ï¼Œåœ¨çµ‚ç«¯æ©Ÿä¸­æ“ä½œ\n1 2 3  cd myBlog git init git submodule add https://github.com/budparr/gohugo-theme-ananke.git themes/ananke   è¨­å®šä¸»é¡Œ\n1  echo \u0026#39;theme = \u0026#34;ananke\u0026#34;\u0026#39; \u0026gt;\u0026gt; config.toml   4.åŠ å…¥æ–‡ç«  ä½¿ç”¨ new å‘½ä»¤ä¾†ç”¢ç”Ÿä¸€ç¯‡æ–‡ç« ï¼Œåœ¨çµ‚ç«¯æ©Ÿä¸­æ“ä½œ\n1  hugo new posts/my-first-post.md   ä½ å¯ä»¥ç”¨ markdown ç·¨è¼¯å…§å®¹ã€‚\n5.å•Ÿå‹•ç¶²ç«™ å•Ÿå‹•ä½ çš„ Blog\n1  hugo server -D   æ‰“é–‹ç€è¦½å™¨ http://localhost:1313/\nåƒè€ƒä¾†æº è¬è¬ HUGO\n","description":"é€éHUGOå»ºç«‹Blog","id":14,"section":"posts","tags":["Hugo"],"title":"å»ºç«‹å…è²»çš„å€‹äººåšå®¢ By HUGO","uri":"https://reddtsai.github.io/zh/posts/hugo_hello/"},{"content":"Helloï¼Œå¤§å®¶å¥½æˆ‘æ˜¯Reddï¼Œæ˜¯ä½ç¶²è·¯å¾Œç«¯è»Ÿé«”å·¥ç¨‹å¸«(Internet Backend Engineer)ï¼Œåœ¨æ­¤ä¸€é‚Šè¨˜éŒ„ä¸¦èˆ‡å¤§å®¶åˆ†äº«è‡ªå·±çš„å·¥ä½œç¶“é©—ã€‚\n","description":"about page of Redd's side project","id":15,"section":"","tags":null,"title":"About","uri":"https://reddtsai.github.io/zh/about/"},{"content":"Elastic æä¾›ä¸€å€‹å¼·å¤§çš„ UI ä»‹é¢ Kibanaï¼Œé€éå®ƒèƒ½æ›´æœ‰æ•ˆçš„åˆ†äº«èˆ‡å‘ˆç¾ Elasticsearch ä¸­çš„æ•¸æ“šï¼Œæ¥ä¸‹ä¾†æœƒä»¥æœ¬èº«ä½¿ç”¨çš„æ¡ˆä¾‹ï¼Œä¾†ä»‹ç´¹å¦‚ä½•ä½¿ç”¨ Kibanaã€‚\n ç‰ˆæœ¬\n Kibana 6\nå®‰è£è«‹åƒè€ƒä¸‹ä¸€ç¯‡æ–‡ç« CentOS 7 å¦‚ä½•å®‰è£ Kibana   Discover Page æ•¸æ“šæ¢ç´¢åŠŸèƒ½ï¼Œä½¿ç”¨ Elasticsearch Indexã€Time Range å’Œ Query DSL éæ¿¾æœç´¢ï¼Œé¡¯ç¤ºæ•¸æ“šè¨ˆæ•¸å’Œå…§ä†Ÿ\n æ³¨æ„\nå¦‚æœé‡åˆ° no cached mapping for this field\nè©¦è‘—åœ¨ Managementï¼ŒRefresh field list\n Dashboard Page å„€è¡¨ç‰ˆåŠŸèƒ½ï¼ŒKibana æä¾›å¤šæ¨£è¦–è¦ºåŒ–åœ–è¡¨ï¼Œå„€è¡¨ç‰ˆå¯å¹«åŠ©ä½ æ”¶é›†ç®¡ç†é€™äº›åœ–è¡¨\nLogs Page æ•¸æ“šåŠŸèƒ½ï¼Œé¡¯ç¤ºåŒ¯å…¥çš„æ•¸æ“š\nQuery DSL Elastic æä¾›äº†ä¸€å¥—æŸ¥è©¢èªæ³• DSL (Domain Specific Language)ï¼Œå¯é€é RESTful æˆ– Kibana çš„ä»‹é¢ä¾†ä½¿ç”¨ï¼Œé€™é‚Šä»‹ç´¹å¹¾å€‹ç¯„ä¾‹\n  Match\nä¾‹å¦‚æŸ¥è©¢ IIS ä¸­ï¼Œæœ‰é‚£äº› Request å›æ‡‰ 500\n GET /_search { \u0026quot;query\u0026quot;: { \u0026quot;match\u0026quot;: { \u0026quot;iis.access.response_code\u0026quot;: { \u0026quot;query\u0026quot;: 500, \u0026quot;type\u0026quot;: \u0026quot;phrase\u0026quot; } } } }    Wildcard\nä¾‹å¦‚æŸ¥è©¢ IIS ä¸­ï¼Œæœ‰é‚£äº› Request url like */app/\n GET /_search { \u0026quot;query\u0026quot;: { \u0026quot;wildcard\u0026quot;: { \u0026quot;iis.access.url\u0026quot;: \u0026quot;*/app\u0026quot; } } }    Prefix\nä¾‹å¦‚æŸ¥è©¢ IIS ä¸­ï¼Œurl ä»¥ /en/app é–‹é ­çš„ Request æœ‰é‚£äº›\n GET /_search { \u0026quot;query\u0026quot;: { \u0026quot;prefix\u0026quot;: { \u0026quot;iis.access.url\u0026quot;: \u0026quot;/en/app\u0026quot; } } }    åƒè€ƒ Elastic å®˜ç¶²\n","description":"ä»‹ç´¹ Kibana å€‹äººæ‡‰ç”¨å¯¦ä¾‹","id":16,"section":"posts","tags":["Kibana"],"title":"å¦‚ä½•ä½¿ç”¨ Kibana åˆ†äº«æ—¥èªŒ","uri":"https://reddtsai.github.io/zh/posts/elk_kibana/"},{"content":"ç‰ˆæœ¬\n Filebeat 6\nç’°å¢ƒ Windows 10  1. ä¸‹è¼‰ Filebeat Download Filebeat for Windows\n2. å®‰è£ Filebeat è§£å£“ç¸®è‡³ C:\\Program Files\\Filebeatï¼Œä»¥ admin è§’è‰²é–‹å•Ÿ PowerShell\n1 2  cd \u0026#39;C:\\Program Files\\Filebeat\u0026#39; .\\install-service-filebeat.ps1   3. è¨­å®š Filebeat ç·¨è¼¯ filebeat.ymlï¼Œè¨­å®š elasticsearch å’Œ kibana çš„ä½ç½®\n1 2 3 4  output.elasticsearch: hosts: [\u0026#34;localhost:9200\u0026#34;] setup.kibana: host: \u0026#34;localhost:5601\u0026#34;   4. è¨­å®š Filebeat æ¨¡çµ„ æ”¶é›† IIS Log\nç·¨è¼¯ filebeat\\module\\iis\\access\\manifest.yml\n1 2 3  default.paths: default: - C:/inetpub/logs/LogFiles/*/*.log   å•Ÿç”¨ iis æ¨¡çµ„\n1  .\\filebeat.exe modules enable iis   5. å•Ÿå‹• Filebeat æœå‹™ 1 2  .\\filebeat.exe setup Start-Service filebeat   ","description":"ä»‹ç´¹åœ¨ Windows ä¸­å®‰è£ Filebeat","id":17,"section":"posts","tags":["Filebeat","Windows"],"title":"Windows å¦‚ä½•å®‰è£ Filebeat","uri":"https://reddtsai.github.io/zh/posts/elk_windowsfilebeat/"},{"content":"ç‰ˆæœ¬\n ElastAlert 0.2\nç’°å¢ƒ CentOS 7\nå®‰è£éœ€æ±‚ python 2.7 python-dev python-pip dependency Packageï¼Œåƒè€ƒ ElastAlert requirements.txt  1. å®‰è£ PIPã€DEV ç¢ºèªæ˜¯å¦å·²å®‰è£ python 2.7\n1  python --version   å®‰è£ python-pip\n1 2 3 4 5  sudo yum -y install python-devel sudo yum -y install epel-release sudo yum -y install python-pip pip --version sudo pip install --upgrade pip   2. å®‰è£ ElastAlert ç¢ºèªå¥—ä»¶ï¼Œå®‰è£çš„éç¨‹ä¸­å¯èƒ½æœƒé‡åˆ°ç›¸ä¾å¥—ä»¶çš„å•é¡Œï¼Œè«‹åƒè€ƒ ElastAlert requirements.txt ä¸­çš„éœ€æ±‚å¥—ä»¶æ¸…å–®\n1  pip list   ä¾‹å¦‚ï¼Œåœ¨å®‰è£ blist å¥—ä»¶æ™‚ï¼Œéœ€è¦å®‰è£ GCC\n1  sudo yum -y install gcc   ä¾‹å¦‚ï¼Œåœ¨æ›´æ–° requests å¥—ä»¶æ™‚ï¼Œéœ€è¦å¼·åˆ¶ç§»é™¤å®‰è£\n1  sudo pip install requests --ignore-installed requests   å®‰è£ ElastAlert\n1  sudo pip install elastalert   3. è¨­å®š ElastAlert åœ¨ ElastAlert ç›®éŒ„ä¸‹æ–°å¢è¨­å®šæª” config.yamlã€‚ä»¥æˆ‘çš„ç’°å¢ƒç‚ºä¾‹ /usr/lib/python2.7/site-packages/elastalert\nå»ºè­°è¤‡è£½ ElastAlert config.yaml.example\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28  # This is the folder that contains the rule yaml files# Any .yaml file will be loaded as a rulerules_folder:/usr/lib/python2.7/site-packages/elastalert/alert_rules# How often ElastAlert will query Elasticsearch# The unit can be anything from weeks to secondsrun_every:# seconds:minutes:1# hours:# ElastAlert will buffer results from the most recent# period of time, in case some log sources are not in real timebuffer_time:minutes:15# The Elasticsearch hostname for metadata writeback# Note that every rule can have its own Elasticsearch hostes_host:elasticsearch.example.com# The Elasticsearch portes_port:9200# elastalert-create-index to set a mappingwriteback_index:elastalert_statusalert_time_limit:days:2  4. è¨­å®š Elasticsearch Client ç¢ºèª Elasticsearch Client çš„ç‰ˆæœ¬å’Œ Elasticsearch çš„ç‰ˆæœ¬ç›¸ç¬¦ã€‚ä»¥æˆ‘çš„ç’°å¢ƒç‚ºä¾‹ï¼Œéœ€è¦å°‡ lasticsearch Client æ›´æ–°è‡³ 6.X ç‰ˆ\n1 2 3  pip list sudo pip uninstall elasticsearch sudo pip install \u0026#34;elasticsearch\u0026lt;7\u0026#34;   åœ¨ Elasticsearch å¢åŠ ä¸€å€‹ ElastAlert çš„ç´¢å¼•\n1  elastalert-create-index   5. è¨­å®šé€šçŸ¥è¦å‰‡ æ–°å¢é€šçŸ¥è¦å‰‡è¨­å®šæª” filebeat_frequency.yamlã€‚ä»¥æˆ‘çš„ç’°å¢ƒç‚ºä¾‹ /usr/lib/python2.7/site-packages/elastalert/alert_rules\né€™è£¡ä»¥ IIS Log ç‚ºä¾‹ï¼Œç•¶ http status != 200 æ™‚ï¼Œç™¼é€ä¸€å€‹è¨Šæ¯è‡³ Slack\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27  es_host:elasticsearch.example.comes_port:9200name:Examplefrequencyruletype:frequencyindex:filebeat-*# (Required, frequency specific)# Alert when this many documents matching the query occur within a timeframenum_events:50# (Required, frequency specific)# num_events must occur within this amount of time to trigger an alerttimeframe:hours:4filter:- query:query_string:query:\u0026#34;NOT iis.access.response_code: 200 AND event.dataset: iis.access\u0026#34;alert:- slack:slack_webhook_url:\u0026#34;http://slack_webhook_url\u0026#34;  æ¸¬è©¦è¦å‰‡è¨­å®šæª”\n1  elastalert-test-rule alert_rules/filebeat_frequency.yaml   6. è¨­å®š ElastAlert æœå‹™ åŸ·è¡Œæ¸¬è©¦\n1  python -m elastalert --verbose --rule alert_rules/filebeat_frequency.yaml   æ–°å¢æœå‹™\n1 2 3 4  sudo mkdir -p /etc/elastalert/rules cd /etc/elastalert/ sudo cp /usr/lib/python2.7/site-packages/elastalert/config.yaml config.yaml sudo cp /usr/lib/python2.7/site-packages/elastalert/alert_rules/filebeat_frequency.yaml rules/filebeat_frequency.yaml   ä¿®æ”¹ config.yaml\nrules_folder: /etc/elastalert/rules\næ–°å¢æœå‹™è¨­å®šæª”\n1 2  cd /etc/systemd/system/ sudo vi elastalert.service   elastalert.service\n1 2 3 4 5 6 7 8 9 10 11 12  [Unit] Description=elastalert [Service] Type=simple User=root Group=root Restart=on-failure WorkingDirectory=/usr/lib/python2.7/site-packages/elastalert ExecStart=/usr/bin/elastalert --config /etc/elastalert/config.yaml --rule /etc/elastalert/rules/filebeat_frequency.yaml [Install] WantedBy=multi-user.target   å•Ÿå‹•æœå‹™\n1 2 3  sudo systemctl enable elastalert.service sudo systemctl start elastalert.service sudo systemctl status elastalert.service   åƒè€ƒ ElastAlert Repo\nElastAlert Doc\n","description":"ä»‹ç´¹åœ¨ CentOS ä¸­å®‰è£ ElastAlert","id":18,"section":"posts","tags":["ElastAlert","CentOS"],"title":"CentOS 7 å¦‚ä½•å®‰è£ ElastAlert","uri":"https://reddtsai.github.io/zh/posts/elk_centoselastalert/"},{"content":"å¾äº‹è»Ÿé«”å·¥ç¨‹å¸«çš„å·¥ä½œåå¹´äº†ï¼Œè¢«ç¨±éè»Ÿé«”å·¥ç¨‹å¸«(PG)ã€ç ”ç™¼å·¥ç¨‹å¸«(RD)ã€å¾Œç«¯å·¥ç¨‹å¸«(Backend)ã€ç³»çµ±è¨­è¨ˆå¸«(SD)ã€ç³»çµ±æ¶æ§‹å¸«(SA) \u0026hellip;ï¼Œé›–ç„¶è·ç¨±ä¸€ç›´å†è®Šï¼Œä½†è‡ªå·±æ„Ÿè¦ºå·¥ä½œå…§å®¹ä¸¦ç„¡å¤ªå¤§çš„æ”¹è®Šï¼Œæœ€è¿‘å‰›å¥½çœ‹åˆ°ä¸€ç¯‡æœ‰è¶£çš„æ–‡ç« ï¼Œæ˜¯é—œæ–¼è»Ÿé«”é–‹ç™¼è€…çš„ Roadmapï¼Œä¸¦è·Ÿè‡ªå·±ä½œå€‹æ¯”è¼ƒã€‚\nNowadays Web Developer ä»Šå¹´5Gä¸Šå¸‚äº†ï¼Œåœ¨é€™å€‹ç¶²è·¯ä¸–ä»£ï¼Œæˆ‘çªç„¶æˆäº† web developerï¼Œåˆ°åº•ä»€éº¼æ˜¯ web developerï¼Ÿç”¨Kamran Ahmedçš„åœ–å¯çœ‹å‡ºç¾ä»Š web developer å¤§è‡´å¯åˆ†ç‚º backendã€frontendåŠ devopsã€‚å¦å¤–ä¹Ÿåˆ—å‡ºäº† web developer éœ€å…·å‚™çš„æŠ€èƒ½ã€‚\nBackend Skill Tree å¾Œç«¯åœ¨æä»€éº¼ï¼Ÿçœ‹å®Œä¸‹æ–¹ Backend Roadmap é‚„æƒ³ç•¶å¾Œç«¯å·¥ç¨‹å¸«å—ï¼Ÿè‡ªå·±ä¹Ÿæ˜¯å¾Œç«¯å·¥ç¨‹ï¼Œé‚£å°±é€éé€™å¼µåœ–ä¾†ç›¤é»ä¸€ä¸‹è‡ªå·±(çœ‹çœ‹è‡ªå·±æœ‰å¤šçˆ½ğŸ¤¥)ã€‚\nä»¥å€‹äººç¶“é©—å°‡é€™å¼µ Roadmap åˆ†ç‚ºä»¥ä¸‹å¹¾å€‹å¤§é …\n Data Transfer\nDNSã€FTPã€HTTPã€TCPã€RPC \u0026hellip; Data Storage\nCacheã€Databaseã€File \u0026hellip; Host\nDomainã€OSã€Dockerã€IISã€Nginxã€AWSã€GCPã€Azures \u0026hellip; Programming\nPythonã€Golangã€.NETã€Node.jsã€Git\u0026hellip; Test\nUnitã€Intergrationã€Load Deployment\nCIã€CD Other\nLogã€Monitorã€Elastic  ç¶“ä»¥ä¸Šé€™äº›é …ç›®ä¾†ç›¤é»è‡ªå·±æ˜¯ä¸æ˜¯å€‹å¾Œç«¯å·¥å¸«çš„åŒæ™‚ï¼Œä¹Ÿç”¨å®ƒè¨˜éŒ„åˆ†äº«ä¸€äº›å¯¦ä¾‹å’Œå€‹äººç¶“é©—(å¸Œæœ›æœªä¾†èƒ½è£œå®ŒğŸ™ğŸ™ğŸ™)ã€‚\nä»¥ä¸‹æ˜¯Kamran Ahmedæ‰€ç•«å¾Œç«¯å·¥ç¨‹å¸«çš„æŠ€èƒ½æ¨¹ã€‚\nFrontend Skill Tree å‰ç«¯åœ¨æä»€éº¼ï¼Ÿä»¥ä¸‹æ˜¯Kamran Ahmedæ‰€ç•«å‰ç«¯å·¥ç¨‹å¸«çš„æŠ€èƒ½æ¨¹ã€‚\nDevOps Skill Tree é‹ç¶­åœ¨æä»€éº¼ï¼Ÿä»¥ä¸‹æ˜¯Kamran Ahmedæ‰€ç•«é‹ç¶­å·¥ç¨‹å¸«çš„æŠ€èƒ½æ¨¹ã€‚\nReference åƒè€ƒä¾†æº\ndeveloper-roadmap by Kamran Ahmed.\n","description":"ç°¡ä»‹å¾Œç«¯å·¥ä½œå’ŒæŠ€èƒ½","id":19,"section":"posts","tags":["Backend"],"title":"å‰ç«¯ï¼Ÿå¾Œç«¯ï¼Ÿå¾Œç«¯å·¥ç¨‹å¸«æä»€éº¼ï¼Ÿ","uri":"https://reddtsai.github.io/zh/posts/backend_skill/"},{"content":"æ­·å² Elastic æ˜¯ç”± Elasticsearchã€Logstach å’Œ Kibana é€™ä¸‰å€‹é–‹æºé …ç›®æ‰€çµ„æˆï¼Œæœ€åˆæ˜¯ç”± Shay ç·¨å¯«çš„ Elasticsearch é€™å€‹é£Ÿè­œæœå°‹å¼•æ“é–‹å§‹ï¼Œå¾Œä¾†èˆ‡ Jordan é–‹ç™¼çš„ Logstach å’Œ Rashid é–‹ç™¼çš„ Kibana å…±åŒåˆä½œã€‚éš¨å¾Œæ¨å‡ºä¸€äº›å•†æ¥­æœå‹™ä¸¦æˆç«‹ Elastic é€™å€‹å“ç‰Œã€‚\nElasticsearch Elasticsearch æ˜¯å€‹æœå°‹åˆ†æå°‹å¼•æ“ï¼Œèƒ½å¤ é›†ä¸­å„²å­˜æ•¸æ“šå’Œåˆ†æ•£é‹ä½œï¼Œä½¿ç”¨ RESTful æ–¹å¼æä¾›æœå‹™ã€‚\nLogstach Logstach æ˜¯å€‹æ•¸æ“šè™•ç†å·¥å…·ï¼Œå°‡ä¸åŒä¾†æºçš„è³‡æ–™è½‰åŒ–ã€è§£ææˆ–åŠ å¯†ï¼Œç„¶å¾Œå°‡æ•¸æ“šç™¼é€è‡³æŒ‡å®šçš„å„²å­˜é«”ã€‚\nKibana Kibana ç‚º Elastic çš„ä»‹é¢(UI)ï¼Œå¯ç”¨ä¾†ç®¡ç†é…ç½® Elasticï¼Œæˆ–é€é DSLã€SQL æŸ¥è©¢èªæ³•ï¼Œå°‡ Elasticsearch æ•¸æ“šåˆ†äº«ã€‚\nåƒè€ƒä¾†æº Elastic å®˜ç¶²\nä¸‹ç¯‡æ–‡ç« æœƒä»‹ç´¹å¦‚ä½•åˆ©ç”¨ Elastic è™•ç†æ—¥èªŒ\n","description":"ä»‹ç´¹ Elastic å€‹äººæ‡‰ç”¨å¯¦ä¾‹","id":20,"section":"posts","tags":["Elastic"],"title":"Elastic ç°¡ä»‹","uri":"https://reddtsai.github.io/zh/posts/elk/"},{"content":"ç•¶ä½ é¢å°æ•¸å€‹è™›æ“¬æ©Ÿã€è³‡æ–™åº«ã€æˆç™¾çš„æœå‹™ã€æ‡‰ç”¨ç¨‹å¼ç”Ÿæˆçš„æ—¥èªŒï¼Œä½ éœ€è¦ä¸€å€‹èƒ½è™•ç†é€™å·¨é‡è² é›œæ—¥èªŒçš„ç”¢å“ï¼Œé€™è£¡ä»‹ç´¹ Elastic é€™å€‹ç”¢å“ä¾†å”åŠ©ä½ ï¼Œå¿…å…è‡ªå·±é€ è¼ªå­ã€‚å°‡ç”±ä¸‹åœ–çš„å…§å®¹ä¾†èªªæ˜ï¼Œå¦‚ä½•ä½¿ç”¨ Elastic è™•ç†æ—¥èªŒä½ çš„æ—¥èªŒã€‚\næ—¥èªŒæ”¶é›† é¦–å…ˆæ˜¯å¦‚ä½•æ”¶é›†åŒ¯æ•´ä½ çš„æ—¥èªŒï¼Ÿä¾‹å¦‚ä½ æœ‰ IISã€NGINXã€MySQLã€APP å¤šç¨®ä¸åŒé¡å‹çš„æ—¥èªŒï¼Œä½ éœ€è¦å°‡å®ƒå€‘æ”¶é›†èµ·ä¾†å­˜æ”¾ï¼Œé€™è£¡æœƒä½¿ç”¨ FileBeat å’Œ Logstash ä¾†æ”¶é›†ã€‚\n FileBeat æ˜¯åŒ¯æ•´è½‰ç™¼æ—¥èªŒå·¥å…·ï¼Œå¯ä½¿ç”¨å®ƒå…§å»ºæ¨¡çµ„æˆ–è‡ªè¨‚æ ¼å¼ä¾†æ”¶é›†æ—¥èªŒï¼Œä¸¦å°‡æ”¶é›†ä¾†çš„æ•¸æ“šè§£æç™¼é€åˆ° Logstash æˆ– Elasticsearch å„²å­˜ã€‚\n ç¯„ä¾‹å¦‚ä½•ä½¿ç”¨ Filebeat æ”¶é›†æ—¥èªŒ\n  Logstash æ˜¯æ¥æ”¶è½‰ç™¼æ—¥èªŒä¸­ä»‹æœå‹™ï¼Œå¾éæ¿¾å™¨æ¥æ”¶ä¸åŒå½¢å¼çš„ä¾†æºï¼Œé€éå»ºæ§‹çµæ§‹ä¾†åˆ†æè½‰æ›æˆé€šç”¨æ ¼å¼ï¼Œå†è¼¸å‡ºåˆ° Elasticsearch æˆ–å…¶å®ƒå„²å­˜è¨­å‚™ã€‚\næ—¥èªŒå­˜å„² æ¥ä¸‹ä¾†é€é Elasticsearch ä¾†å„²å­˜æ”¶é›†ä¾†çš„è³‡æ–™ã€‚\n Elasticsearch æ˜¯ä¸€å€‹åˆ†æ•£å¼ã€RESTful é¢¨æ ¼çš„æœå°‹å’Œæ•¸æ“šåˆ†æå¼•æ“ï¼Œå®ƒæ˜¯ Elastic çš„æ ¸å¿ƒï¼Œå¾ˆåƒè³‡æ–™åº«æä¾›æœç´¢å’Œå„²å­˜ã€‚\n ç¯„ä¾‹CentOS 7 å¦‚ä½•å®‰è£ Elasticsearch\n æ—¥èªŒåˆ†æ Elastc æä¾›ä¸€å€‹å¼·å¤§çš„ UI ä»‹é¢ Kibanaï¼Œå®ƒèƒ½å”åŠ©ä½ åˆ†æ è¦–è¦ºåŒ–ã€åˆ†äº«æ”¶é›†ä¾†çš„æ•¸æ“šã€‚\n Kibana æ˜¯å€‹å¼·å¤§çš„ UIï¼Œé€éç¶²é å‘ˆç¾ï¼Œæä¾›å¤šç¨®å„€è¡¨çš®å’Œåœ–è¡¨ä¾†åˆ†äº«æ•¸æ“šã€‚\n ç¯„ä¾‹å¦‚ä½•ä½¿ç”¨ Kibana åˆ†äº«æ—¥èªŒ\n æ—¥èªŒç›£æ§ æœ€å¾Œï¼ŒElastc ä¹Ÿæä¾›æ•¸æ“šã€æ•ˆèƒ½ç›£æ§æœå‹™ï¼Œé€™éƒ¨åˆ†å±¬æ–¼ç™½é‡‘æœå‹™éœ€è¦ä»˜è²»ï¼Œä¹Ÿæœ‰ä¸€äº›æ›¿ä»£æ–¹ï¼Œä¾‹å¦‚ ElastAlertã€Sentinlã€‚\n ç¯„ä¾‹CentOS 7 å¦‚ä½•å®‰è£ ElastAlert\n","description":"ä»‹ç´¹ Elastic å€‹äººæ‡‰ç”¨å¯¦ä¾‹","id":21,"section":"posts","tags":["Elastic"],"title":"å¦‚ä½•åˆ©ç”¨ Elastic è™•ç†æ—¥èªŒ","uri":"https://reddtsai.github.io/zh/posts/elk_logging/"},{"content":"Filebeat æ˜¯å€‹æª”æ¡ˆåˆ†æå·¥å…·ï¼Œæœ€å¸¸ç”¨ä¾†æ”¶é›†æ—¥èªŒæª”ï¼Œæ”¶é›†çš„éç¨‹åˆ†ç‚º\n æ”¶é›†æ•¸æ“š (è®€å–æ—¥èªŒ) è§£ææ•¸æ“š\nå¸¸è¦‹çš„æ—¥èªŒæ ¼å¼(IISã€NGINXã€MySQL)å¤§å¤šå¯é€é Filebeat å…§å»ºæ¨¡çµ„ä¾†è§£æï¼Œä¹Ÿå¯é€éæ–°å¢æ¨¡çµ„ä¾†å®¢è£½æ ¼å¼ï¼Œä»¥ä¸‹æœƒèªªæ˜è©²å¦‚ä½•æ–°å¢æˆ–è¨­å®š Filebeat æ¨¡çµ„ã€‚ å‚³é€æ•¸æ“š (Logstash æˆ– Elasticsearch å„²å­˜)   ç‰ˆæœ¬\n Filebeat 6\nå®‰è£è«‹åƒè€ƒä¸‹ä¸€ç¯‡æ–‡ç« Windows å¦‚ä½•å®‰è£ Filebeat   è¨­å®šæ¨¡çµ„ Filebeat æä¾›å¤šæ¨£æ¨¡çµ„ä¾†æ”¶é›†å¸¸è¦‹çš„æ—¥èªŒï¼Œé€™é‚Šä»¥ IIS æ—¥èªŒç‚ºä¾‹ï¼Œèªªæ˜å¦‚ä½•è¨­å®šæ¨¡çµ„ã€‚\n  è¨­å®šæ—¥èªŒè·¯å¾‘\nç·¨è¼¯ [Windows å®‰è£è·¯å¾‘]\\filebeat\\module\\iis\\access\\manifest.yml\n #åŠ å…¥ IIS æ—¥èªŒè·¯å¾‘ default.paths: default: - C:/inetpub/logs/LogFiles/*/*.log    å•Ÿç”¨æ¨¡çµ„\né–‹å•Ÿ IIS æ¨¡çµ„ï¼Œåœ¨ PowerShell åŸ·è¡Œä¸‹æ–¹å‘½ä»¤\n cd [Windows å®‰è£è·¯å¾‘] .\\filebeat.exe modules enable iis    æ–°å¢æ¨¡çµ„ æ–°å¢ä¸€å€‹æ¨¡çµ„å¾Œï¼Œå¯çœ‹åˆ°æ‰€ç”¢ç”Ÿçš„æª”æ¡ˆçµæ§‹ï¼Œä»¥ä¸‹æ–¹æˆ‘æ‰€å»ºç«‹çš„ nlog module ç‚ºä¾‹\nfilebeat\nâ”œ module\nâ”‚ â© nlog\nâ”‚ â© app\nâ”‚ â”œ manifest.yaml\nâ”‚ â”œ config\nâ”‚ â”‚ â© fileset.yml\nâ”‚ â© ingest\nâ”‚ â© pipeline.json\nâ”œ modules.d\nâ”‚ â© nlog.yml.disabled\n æ–°å¢ä¸€å€‹æ¨¡çµ„éœ€é€é Beats ç¨‹å¼ç¢¼ä¾†é€¹æˆï¼Œé€™è£¡åªæœƒèªªæ˜æ–°æ¨¡çµ„éœ€è¦ä½œé‚£äº›è¨­å®šï¼Œå®Œæ•´è³‡è¨Šè«‹åƒè€ƒ github Beats repository\n   manifest.yaml\nmanifest æ§åˆ¶æª”ï¼Œè¨­å®šæ¨¡çµ„åƒè€ƒä½ç½®\n #æ—¥èªŒè·¯å¾‘ var: ï¼ name: paths os.windows ï¼ C:/log/*.log #template åƒè€ƒè·¯å¾‘ input: config/fileset.yml #Ingest Pipeline åƒè€ƒè·¯å¾‘ ingest_pipeline: ingest/pipeline.json    fileset.yml\nfileset è¼¸å…¥çµ„æ…‹æª”ï¼Œè¨­å®šè¼¸å…¥ä½ç½®ã€æ’é™¤è¼¸å…¥æª”æ¡ˆã€æ’é™¤è¼¸å…¥è¡ŒåŠå¤šè¡Œçµ„åˆ\n #æ’é™¤ .gz æª” exclude_files: [\u0026quot;.gz$\u0026quot;]    pipeline.json\nlasticsearch ingest node pipeline configurations\n  modules.yml.disabled\næ¨¡çµ„é–‹é—œ\n  æ¸¬è©¦æ¨¡çµ„ æ–°å¢æˆ–è¨­å®šå¥½æ¨¡çµ„ï¼Œå…ˆç”±æ¸¬è©¦ç¢ºèªå®Œå¾Œå†ä¸Šç·š\n  æ¸¬è©¦è¨­å®šæª”\n.\\filebeat.exe test config -c filebeat.yml\n.\\filebeat.exe test output filebeat.yml\n  åŸ·è¡Œ Filebeat\n.\\filebeat.exe -e -c filebeat.yml -d \u0026ldquo;*\u0026rdquo;\n æ³¨æ„\nè«‹å…ˆæ¸…é™¤å‰æ¬¡æ¸¬è©¦æ‰€è®€å–çš„è¨˜éŒ„ï¼Œåˆªé™¤ç›®éŒ„ filebeat\\data\\registry\n   æª¢æŸ¥ Ingest \u0026amp; Pipeline\né€é elasticsearch api æŸ¥è©¢ Ingest \u0026amp; pipeline (ä¾‹å¦‚ IIS æ¨¡çµ„ pipeline filebeat-6.7.0-iis-access-default)\ncurl -X GET http://elasticsearch:9200/_cat/indices?v\ncurl -X GET http://elasticsearch:9200/_ingest/pipeline\ncurl -X GET http://elasticsearch:9200/_ingest/pipeline/filebeat-6.7.0-iis-access-default\n å¦‚æœæ¸¬è©¦ pipeline æœ‰å•é¡Œï¼Œéœ€è¦åˆªé™¤èˆŠçš„ pipeline.json\n  curl -X DELETE http://elasticsearch:9200/_ingest/pipeline/filebeat-6.7.0-iis-access-default    ç¢ºèªè³‡æ–™\né–‹å•Ÿ Kibanaï¼Œé€é Logs ä»‹é¢ï¼Œç¢ºèªæ˜¯å¦æœ‰é¡¯ç¤º log è³‡æ–™\n  åƒè€ƒ Elastic å®˜ç¶²\n","description":"é€é Filebeat æ”¶é›†ç³»çµ±ã€æ‡‰ç”¨ç¨‹å¼ Log","id":22,"section":"posts","tags":["Filebeat"],"title":"å¦‚ä½•ä½¿ç”¨ Filebeat æ”¶é›†æ—¥èªŒ","uri":"https://reddtsai.github.io/zh/posts/elk_iisfilebeat/"},{"content":"ç‰ˆæœ¬\n Kibana 6.8\nç’°å¢ƒ CentOS 7  1. å®‰è£ OpenJDK 1 2  sudo yum install java-1.8.0-openjdk-devel java -version   2. å®‰è£ Elasticsearch ç°½ç« å…¬é‘° 1  rpm --import https://artifacts.elastic.co/GPG-KEY-elasticsearch   3. å®‰è£ Kibana å»ºç«‹ Kibana å¥—ä»¶å®¹å™¨è¨­å®šæª” /etc/yum.repos.d/kibana.repo\nå¡«å…¥å¥—ä»¶å®¹å™¨åƒæ•¸\n1 2 3 4 5 6 7 8  [kibana-6.x] name=Kibana repository for 6.x packages baseurl=https://artifacts.elastic.co/packages/6.x/yum gpgcheck=1 gpgkey=https://artifacts.elastic.co/GPG-KEY-elasticsearch enabled=1 autorefresh=1 type=rpm-md   å®‰è£ kibana\n1  sudo yum install kibana   4. é…ç½® kibana kibana é…ç½®æª” /etc/kibana/kibana.yml\n1 2  elasticsearch.hosts: http://localhost:9200 server.host: 0.0.0.0   5. è¨­å®šé˜²ç«ç‰†å’ŒIP æ–°å¢\n1 2 3 4 5  sudo firewall-cmd --new-zone=kibana --permanent sudo firewall-cmd --reload sudo firewall-cmd --zone=kibana --add-source=\u0026lt;IP_ADDRESS\u0026gt;/32 --permanent sudo firewall-cmd --zone=kibana --add-port=5601/tcp --permanent sudo firewall-cmd --reload   ä¿®æ”¹\n1 2  sudo firewall-cmd --zone=kibana --add-source=\u0026lt;IP_ADDRESS\u0026gt; --permanent sudo firewall-cmd --reload   æ¸¬è©¦\n1 2  sudo firewall-cmd --zone=kibana --list-all sudo netstat -plnt   6. å•Ÿå‹• kibana æœå‹™ 1 2  sudo systemctl enable kibana.service sudo systemctl start kibana.service   æ¸¬è©¦ kibana\nhttp://localhost:5601\n1  sudo systemctl status kibana.service   ä¹Ÿå¯æª¢æŸ¥æœå‹™è¨˜éŒ„è¨Šæ¯\n1  sudo journalctl --unit kibana --since \u0026#34;20 min ago\u0026#34;   åƒè€ƒ Elastic å®˜ç¶²\n","description":"ä»‹ç´¹åœ¨ CentOS ä¸­å®‰è£ Kibana","id":23,"section":"posts","tags":["Kibana","CentOS"],"title":"CentOS 7 å¦‚ä½•å®‰è£ Kibana","uri":"https://reddtsai.github.io/zh/posts/elk_centoskibana/"},{"content":"ç‰ˆæœ¬\n Elasticsearch 6.8\nç’°å¢ƒ CentOS 7  1. å®‰è£ OpenJDK 1 2  sudo yum install java-1.8.0-openjdk-devel java -version   2. å®‰è£ Elasticsearch ç°½ç« å…¬é‘° 1  rpm --import https://artifacts.elastic.co/GPG-KEY-elasticsearch   3. å®‰è£ Elasticsearch å»ºç«‹ Elasticsearch å¥—ä»¶å®¹å™¨è¨­å®šæª” /etc/yum.repos.d/elasticsearch.repo\nå¡«å…¥å¥—ä»¶å®¹å™¨åƒæ•¸\n1 2 3 4 5 6 7 8  [elasticsearch-6.x] name=Elasticsearch repository for 6.x packages baseurl=https://artifacts.elastic.co/packages/6.x/yum gpgcheck=1 gpgkey=https://artifacts.elastic.co/GPG-KEY-elasticsearch enabled=1 autorefresh=1 type=rpm-md   å®‰è£ Elasticsearch\n1  sudo yum install elasticsearch   4. å•Ÿå‹• Elasticsearch æœå‹™ 1 2  sudo systemctl enable elasticsearch.service sudo systemctl start elasticsearch.service   æ¸¬è©¦ Elasticsearch\n1 2  sudo systemctl status elasticsearch.service curl -X GET http://localhost:9200   ä¹Ÿå¯æª¢æŸ¥æœå‹™è¨˜éŒ„è¨Šæ¯\n1  sudo journalctl --unit elasticsearch --since \u0026#34;20 min ago\u0026#34;   5. è¨­å®šé˜²ç«ç‰†å’ŒIP æ–°å¢\n1 2 3 4 5  sudo firewall-cmd --new-zone=elasticsearch --permanent sudo firewall-cmd --reload sudo firewall-cmd --zone=elasticsearch --add-source=\u0026lt;IP_ADDRESS\u0026gt;/32 --permanent sudo firewall-cmd --zone=elasticsearch --add-port=9200/tcp --permanent sudo firewall-cmd --reload   ä¿®æ”¹\n1 2  sudo firewall-cmd --zone=elasticsearch --add-source=\u0026lt;IP_ADDRESS\u0026gt; --permanent sudo firewall-cmd --reload   æ¸¬è©¦\n1 2  sudo firewall-cmd --zone=kibana --list-all sudo netstat -plnt   6. é…ç½® Elasticsearch Elasticsearch é…ç½®æª” /etc/elasticsearch/elasticsearch.yml\nElasticsearch JVM é…ç½®æª” /etc/elasticsearch/jvm.options\nâœ³ï¸è¨˜æ†¶é«”é…ç½®ä¸å¯å°æ”¾å¯¦é«”è¨˜æ†¶é«”50%\n1 2 3  -Xms2g -Xmx2g network.host: 0.0.0.0   åƒè€ƒ Elastic å®˜ç¶²\nåƒè€ƒå®˜æ–¹èªªæ˜\n","description":"ä»‹ç´¹åœ¨ CentOS ä¸­å®‰è£ Elasticsearch","id":24,"section":"posts","tags":["Elasticsearch","CentOS"],"title":"CentOS 7 å¦‚ä½•å®‰è£ Elasticsearch","uri":"https://reddtsai.github.io/zh/posts/elk_centoselastic/"}]